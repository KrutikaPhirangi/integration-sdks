package io.hcxprotocol.impl;

import io.hcxprotocol.dto.BaseRequest;
import io.hcxprotocol.exception.ClientException;
import io.hcxprotocol.init.HCXIntegrator;
import io.hcxprotocol.utils.Constants;
import io.hcxprotocol.utils.JSONUtils;
import io.hcxprotocol.utils.Operations;
import org.apache.commons.io.IOUtils;
import org.junit.jupiter.api.*;

import java.net.URL;
import java.nio.charset.StandardCharsets;
import java.util.*;

import static org.junit.jupiter.api.Assertions.*;


@TestMethodOrder(MethodOrderer.DisplayName.class)
@TestInstance(TestInstance.Lifecycle.PER_CLASS)
class HCXIncomingOutgoingRequestTest {

    private HCXIntegrator hcxIntegrator = null;

    private Map<String, Object> configMap = null;

    @BeforeAll
    public void initializingConfigMap() throws Exception {
        String keyUrl = "https://raw.githubusercontent.com/Swasth-Digital-Health-Foundation/hcx-platform/main/hcx-apis/src/test/resources/examples/test-keys/private-key.pem";
        String certificate = IOUtils.toString(new URL(keyUrl), StandardCharsets.UTF_8);
        configMap = new HashMap<>();
        configMap.put("protocolBasePath", "https://dev-hcx.swasth.app/api/v0.8");
        configMap.put("participantCode", "payr_demomo_790424@swasth-hcx-dev");
        configMap.put("username", "payr_demomo_790424@swasth-hcx-dev");
        configMap.put("password", "Opensaber@123");
        configMap.put("encryptionPrivateKey", "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCG+XLPYiCxrZq71IX+w7uoDGxGI7qy7XaDbL3BJE33ju7rjdrP7wsAOWRvM8BIyWuRZZhl9xG+u7l/7OsZAzGoqI7p+32x+r9IJVzboLDajk6tp/NPg1csc7f2M5Bu6rkLEvrKLz3dgy3Q928rMsD3rSmzBLelfKTo+aDXvCOiw1dMWsZZdkEpCTJxH39Nb2K4S59kO/R2GtSU/QMLq65m34XcMZpDtatA1u1S8JdZNNeMCO+NuFKBzIfvXUCQ8jkf7h612+UP1AYhoyCMFpzUZ9b7liQF9TYpX1Myr/tT75WKuRlkFlcALUrtVskL8KA0w6sA0nX5fORVsuVehVeDAgMBAAECggEAX1n1y5/M7PhxqWO3zYTFGzC7hMlU6XZsFOhLHRjio5KsImgyPlbm9J+W3iA3JLR2c17MTKxAMvg3UbIzW5YwDLAXViC+aW90like8mEQzzVdS7ysXG2ytcqCGUHQNStI0hP0a8T39XbodQl31ZKjU9VW8grRGe12Kse+4ukcW6yRVES+CkyO5BQB+vs3voZavodRGsk/YSt00PtIrFPJgkDuyzzcybKJD9zeJk5W3OGVK1z0on+NXKekRti5FBx/uEkT3+knkz7ZlTDNcyexyeiv7zSL/L6tcszV0Fe0g9vJktqnenEyh4BgbqABPzQR++DaCgW5zsFiQuD0hMadoQKBgQC+rekgpBHsPnbjQ2Ptog9cFzGY6LRGXxVcY7hKBtAZOKAKus5RmMi7Uv7aYJgtX2jt6QJMuE90JLEgdO2vxYG5V7H6Tx+HqH7ftCGZq70A9jFBaba04QAp0r4TnD6v/LM+PGVT8FKtggp+o7gZqXYlSVFm6YzI37G08w43t2j2aQKBgQC1Nluxop8w6pmHxabaFXYomNckziBNMML5GjXW6b0xrzlnZo0p0lTuDtUy2xjaRWRYxb/1lu//LIrWqSGtzu+1mdmV2RbOd26PArKw0pYpXhKFu/W7r6n64/iCisoMJGWSRJVK9X3D4AjPaWOtE+jUTBLOk0lqPJP8K6yiCA6ZCwKBgDLtgDaXm7HdfSN1/Fqbzj5qc3TDsmKZQrtKZw5eg3Y5CYXUHwbsJ7DgmfD5m6uCsCPa+CJFl/MNWcGxeUpZFizKn16bg3BYMIrPMao5lGGNX9p4wbPN5J1HDD1wnc2jULxupSGmLm7pLKRmVeWEvWl4C6XQ+ykrlesef82hzwcBAoGBAKGY3v4y4jlSDCXaqadzWhJr8ffdZUrQwB46NGb5vADxnIRMHHh+G8TLL26RmcET/p93gW518oGg7BLvcpw3nOZaU4HgvQjT0qDvrAApW0V6oZPnAQUlarTU1Uk8kV9wma9tP6E/+K5TPCgSeJPg3FFtoZvcFq0JZoKLRACepL3vAoGAMAUHmNHvDI+v0eyQjQxlmeAscuW0KVAQQR3OdwEwTwdFhp9Il7/mslN1DLBddhj6WtVKLXu85RIGY8I2NhMXLFMgl+q+mvKMFmcTLSJb5bJHyMz/foenGA/3Yl50h9dJRFItApGuEJo/30cG+VmYo2rjtEifktX4mDfbgLsNwsI=\n-----END PRIVATE KEY-----");
        configMap.put("signingPrivateKey", certificate);
        hcxIntegrator = HCXIntegrator.getInstance(configMap);
    }

    String commonFhirPayload = "{ \"resourceType\": \"Bundle\", \"id\": \"d4484cdd-1aae-4d21-a92e-8ef749d6d366\", \"meta\": { \"lastUpdated\": \"2022-02-08T21:49:55.458+05:30\" }, \"identifier\": { \"system\": \"https://www.tmh.in/bundle\", \"value\": \"d4484cdd-1aae-4d21-a92e-8ef749d6d366\" }, \"type\": \"document\", \"timestamp\": \"2022-02-08T21:49:55.458+05:30\", \"entry\": [{ \"fullUrl\": \"Composition/42ff4a07-3e36-402f-a99e-29f16c0c9eee\", \"resource\": { \"resourceType\": \"Composition\", \"id\": \"42ff4a07-3e36-402f-a99e-29f16c0c9eee\", \"identifier\": { \"system\": \"https://www.tmh.in/hcx-documents\", \"value\": \"42ff4a07-3e36-402f-a99e-29f16c0c9eee\" }, \"status\": \"final\", \"type\": { \"coding\": [{ \"system\": \"https://www.hcx.org/document-type\", \"code\": \"HcxCoverageEligibilityRequest\", \"display\": \"Coverage Eligibility Request Doc\" }] }, \"subject\": { \"reference\": \"Patient/RVH1003\" }, \"date\": \"2022-02-08T21:49:55+05:30\", \"author\": [{ \"reference\": \"Organization/Tmh01\" }], \"title\": \"Coverage Eligibility Request\", \"section\": [{ \"title\": \"# Eligibility Request\", \"code\": { \"coding\": [{ \"system\": \"https://fhir.loinc.org/CodeSystem/$lookup?system=http://loinc.org&code=10154-3\", \"code\": \"CoverageEligibilityRequest\", \"display\": \"Coverage Eligibility Request\" }] }, \"entry\": [{ \"reference\": \"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\" }] }] } }, { \"fullUrl\": \"Organization/Tmh01\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"Tmh01\", \"identifier\": [{ \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"HFR-ID-FOR-TMH\" }, { \"system\": \"http://irdai.gov.in/facilities\", \"value\": \"IRDA-ID-FOR-TMH\" } ], \"name\": \"Tata Memorial Hospital\", \"alias\": [ \"TMH\", \"TMC\" ], \"telecom\": [{ \"system\": \"phone\", \"value\": \"(+91) 022-2417-7000\" }], \"address\": [{ \"line\": [ \"Dr Ernest Borges Rd, Parel East, Parel, Mumbai, Maharashtra 400012\" ], \"city\": \"Mumbai\", \"state\": \"Maharashtra\", \"postalCode\": \"400012\", \"country\": \"INDIA\" }], \"endpoint\": [{ \"reference\": \"https://www.tmc.gov.in/\", \"display\": \"Website\" }] } }, { \"fullUrl\": \"Patient/RVH1003\", \"resource\": { \"resourceType\": \"Patient\", \"id\": \"RVH1003\", \"identifier\": [{ \"type\": { \"coding\": [{ \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"SN\", \"display\": \"Subscriber Number\" }] }, \"system\": \"http://gicofIndia.com/beneficiaries\", \"value\": \"BEN-101\" }, { \"system\": \"http://abdm.gov.in/patients\", \"value\": \"hinapatel@abdm\" } ], \"name\": [{ \"text\": \"Hina Patel\" }], \"gender\": \"female\" } }, { \"fullUrl\": \"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\", \"resource\": { \"resourceType\": \"CoverageEligibilityRequest\", \"id\": \"dc82673b-8c71-48c2-8a17-16dcb3b035f6\", \"identifier\": [{ \"system\": \"https://www.tmh.in/coverage-eligibility-request\", \"value\": \"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" }], \"status\": \"active\", \"purpose\": [ \"discovery\" ], \"patient\": { \"reference\": \"Patient/RVH1003\" }, \"servicedPeriod\": { \"start\": \"2022-02-07T21:49:56+05:30\", \"end\": \"2022-02-09T21:49:56+05:30\" }, \"created\": \"2022-02-08T21:49:56+05:30\", \"provider\": { \"reference\": \"Organization/Tmh01\" }, \"insurer\": { \"reference\": \"Organization/GICOFINDIA\" }, \"insurance\": [{ \"focal\": true, \"coverage\": { \"reference\": \"Coverage/dadde132-ad64-4d18-8c18-1d52d7e86abc\" } }] } }, { \"fullUrl\": \"Organization/GICOFINDIA\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"GICOFINDIA\", \"identifier\": [{ \"system\": \"http://irdai.gov.in/insurers\", \"value\": \"112\" }], \"name\": \"General Insurance Corporation of India\" } }, { \"fullUrl\": \"Coverage/dadde132-ad64-4d18-8c18-1d52d7e86abc\", \"resource\": { \"resourceType\": \"Coverage\", \"id\": \"dadde132-ad64-4d18-8c18-1d52d7e86abc\", \"identifier\": [{ \"system\": \"https://www.gicofIndia.in/policies\", \"value\": \"policy-RVH1003\" }], \"status\": \"active\", \"subscriber\": { \"reference\": \"Patient/RVH1003\" }, \"subscriberId\": \"SN-RVH1003\", \"beneficiary\": { \"reference\": \"Patient/RVH1003\" }, \"relationship\": { \"coding\": [{ \"system\": \"http://terminology.hl7.org/CodeSystem/subscriber-relationship\", \"code\": \"self\" }] }, \"payor\": [{ \"reference\": \"Organization/GICOFINDIA\" }] } } ] }";


    @DisplayName("1")
    @Test
    void HcxOutgoingRequestCheckSuccess() throws Exception {
        Map<String, Object> output = new HashMap<>();
        HCXIntegrator.getInstance(configMap).processOutgoingRequest(commonFhirPayload, Operations.COVERAGE_ELIGIBILITY_CHECK, "payr_demomo_790424@swasth-hcx-dev", "", "", new HashMap<>(), output);
        BaseRequest baseRequest = new BaseRequest(output);
        assertEquals(configMap.getOrDefault("participantCode", "").toString(), baseRequest.getHcxSenderCode());
    }

    @DisplayName("2")
    @Test
    void HcxOutgoingRequestOncheckSuccess() throws Exception {
        Map<String, Object> output = new HashMap<>();
        String actionJwe = "eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2NzA2ZGM1Zi1iNDA4LTQ2NTYtYWM4OS1kODliYzQ0ZDg3NGIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImlzcyI6Imh0dHA6XC9cL2tleWNsb2FrLmtleWNsb2FrLnN2Yy5jbHVzdGVyLmxvY2FsOjgwODBcL2F1dGhcL3JlYWxtc1wvc3dhc3RoLWhjeC1wYXJ0aWNpcGFudHMiLCJ0eXAiOiJCZWFyZXIiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJwYXlyX2RlbW9tb183OTA0MjRAc3dhc3RoLWhjeC1kZXYiLCJhdWQiOiJhY2NvdW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJwYXlvciIsImRlZmF1bHQtcm9sZXMtbmRlYXIiXX0sImF6cCI6InJlZ2lzdHJ5LWZyb250ZW5kIiwicGFydGljaXBhbnRfY29kZSI6InBheXJfZGVtb21vXzc5MDQyNEBzd2FzdGgtaGN4LWRldiIsInNjb3BlIjoicHJvZmlsZSBlbWFpbCIsImV4cCI6MTcxMjEyNzgyMiwic2Vzc2lvbl9zdGF0ZSI6IjExMTVkNGFlLTIwMzMtNDdiZi1hZTAxLTE3ZmE1NWM0YWUzMSIsImlhdCI6MTcxMDM5OTgyMiwianRpIjoiNTQ5YWNkNWMtNGRlYi00NTZlLWE2ZTItNzA1YTZkZGQ0MWQ1IiwiZW50aXR5IjpbIk9yZ2FuaXNhdGlvbiJdLCJlbWFpbCI6Im1vY2twYXlvcittb2NrX3BheW9yQHlvcG1haWwuY29tIn0.MJyLhad7zI7ZYubn5qjQ4jagaPXu-ePV9qMm-hZ25aC0SS5kDw5mxODnZ-CC_o43GdAi9kKOtheD2HT0i1f8YgJxBatvbzW0DE0es8m5jejaEv2y3n-FZVHfbkvIbM9ko_poIB-3LK_njHRfNrS0cvCyZ2WEfdZQLjzzS_ePcNtUSmv_mocNSlJUQp-fkrj83uTDdLy9sUBHZgNrZCZCuNmlnPMjr2orF8bxysnZsQhvm1ngi5bREknQ-xcNzPxc_eQdR8ijb2ZZgfiU8UqC4SNVbzljY9IEjluGJNQ09TB2gllsnUiUQDTcHbwXgF3wgAWrb9Sy65OxsUUOqrjGjw";
        HCXIntegrator.getInstance(configMap).processOutgoingCallback(commonFhirPayload, Operations.COVERAGE_ELIGIBILITY_ON_CHECK, "", actionJwe, "response.complete", new HashMap<>(), output);
        BaseRequest baseRequest = new BaseRequest(output);
        System.out.println(output);
        assertEquals(configMap.getOrDefault("participantCode", "").toString(), baseRequest.getHcxSenderCode());
    }

//    @DisplayName("3")
//    @Test
//    void HcxOutgoingRequestResourceTypeError() throws Exception {
//        Map<String, Object> output = new HashMap<>();
//        String fhirPayload = "{\"id\": \"d4484cdd-1aae-4d21-a92e-8ef749d6d366\", \"meta\": { \"lastUpdated\": \"2022-02-08T21:49:55.458+05:30\" }, \"identifier\": { \"system\": \"https://www.tmh.in/bundle\", \"value\": \"d4484cdd-1aae-4d21-a92e-8ef749d6d366\" }, \"type\": \"document\", \"timestamp\": \"2022-02-08T21:49:55.458+05:30\", \"entry\": [{ \"fullUrl\": \"Composition/42ff4a07-3e36-402f-a99e-29f16c0c9eee\", \"resource\": { \"resourceType\": \"Composition\", \"id\": \"42ff4a07-3e36-402f-a99e-29f16c0c9eee\", \"identifier\": { \"system\": \"https://www.tmh.in/hcx-documents\", \"value\": \"42ff4a07-3e36-402f-a99e-29f16c0c9eee\" }, \"status\": \"final\", \"type\": { \"coding\": [{ \"system\": \"https://www.hcx.org/document-type\", \"code\": \"HcxCoverageEligibilityRequest\", \"display\": \"Coverage Eligibility Request Doc\" }] }, \"subject\": { \"reference\": \"Patient/RVH1003\" }, \"date\": \"2022-02-08T21:49:55+05:30\", \"author\": [{ \"reference\": \"Organization/Tmh01\" }], \"title\": \"Coverage Eligibility Request\", \"section\": [{ \"title\": \"# Eligibility Request\", \"code\": { \"coding\": [{ \"system\": \"https://fhir.loinc.org/CodeSystem/$lookup?system=http://loinc.org&code=10154-3\", \"code\": \"CoverageEligibilityRequest\", \"display\": \"Coverage Eligibility Request\" }] }, \"entry\": [{ \"reference\": \"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\" }] }] } }, { \"fullUrl\": \"Organization/Tmh01\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"Tmh01\", \"identifier\": [{ \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"HFR-ID-FOR-TMH\" }, { \"system\": \"http://irdai.gov.in/facilities\", \"value\": \"IRDA-ID-FOR-TMH\" } ], \"name\": \"Tata Memorial Hospital\", \"alias\": [ \"TMH\", \"TMC\" ], \"telecom\": [{ \"system\": \"phone\", \"value\": \"(+91) 022-2417-7000\" }], \"address\": [{ \"line\": [ \"Dr Ernest Borges Rd, Parel East, Parel, Mumbai, Maharashtra 400012\" ], \"city\": \"Mumbai\", \"state\": \"Maharashtra\", \"postalCode\": \"400012\", \"country\": \"INDIA\" }], \"endpoint\": [{ \"reference\": \"https://www.tmc.gov.in/\", \"display\": \"Website\" }] } }, { \"fullUrl\": \"Patient/RVH1003\", \"resource\": { \"resourceType\": \"Patient\", \"id\": \"RVH1003\", \"identifier\": [{ \"type\": { \"coding\": [{ \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"SN\", \"display\": \"Subscriber Number\" }] }, \"system\": \"http://gicofIndia.com/beneficiaries\", \"value\": \"BEN-101\" }, { \"system\": \"http://abdm.gov.in/patients\", \"value\": \"hinapatel@abdm\" } ], \"name\": [{ \"text\": \"Hina Patel\" }], \"gender\": \"female\" } }, { \"fullUrl\": \"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\", \"resource\": { \"resourceType\": \"CoverageEligibilityRequest\", \"id\": \"dc82673b-8c71-48c2-8a17-16dcb3b035f6\", \"identifier\": [{ \"system\": \"https://www.tmh.in/coverage-eligibility-request\", \"value\": \"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" }], \"status\": \"active\", \"purpose\": [ \"discovery\" ], \"patient\": { \"reference\": \"Patient/RVH1003\" }, \"servicedPeriod\": { \"start\": \"2022-02-07T21:49:56+05:30\", \"end\": \"2022-02-09T21:49:56+05:30\" }, \"created\": \"2022-02-08T21:49:56+05:30\", \"provider\": { \"reference\": \"Organization/Tmh01\" }, \"insurer\": { \"reference\": \"Organization/GICOFINDIA\" }, \"insurance\": [{ \"focal\": true, \"coverage\": { \"reference\": \"Coverage/dadde132-ad64-4d18-8c18-1d52d7e86abc\" } }] } }, { \"fullUrl\": \"Organization/GICOFINDIA\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"GICOFINDIA\", \"identifier\": [{ \"system\": \"http://irdai.gov.in/insurers\", \"value\": \"112\" }], \"name\": \"General Insurance Corporation of India\" } }, { \"fullUrl\": \"Coverage/dadde132-ad64-4d18-8c18-1d52d7e86abc\", \"resource\": { \"resourceType\": \"Coverage\", \"id\": \"dadde132-ad64-4d18-8c18-1d52d7e86abc\", \"identifier\": [{ \"system\": \"https://www.gicofIndia.in/policies\", \"value\": \"policy-RVH1003\" }], \"status\": \"active\", \"subscriber\": { \"reference\": \"Patient/RVH1003\" }, \"subscriberId\": \"SN-RVH1003\", \"beneficiary\": { \"reference\": \"Patient/RVH1003\" }, \"relationship\": { \"coding\": [{ \"system\": \"http://terminology.hl7.org/CodeSystem/subscriber-relationship\", \"code\": \"self\" }] }, \"payor\": [{ \"reference\": \"Organization/GICOFINDIA\" }] } } ] }";
//        HCXIntegrator.getInstance(configMap).processOutgoingRequest(fhirPayload, Operations.COVERAGE_ELIGIBILITY_CHECK, "testpayor1.icici@swasth-hcx-dev", "", "", new HashMap<>(), output);
//        assertTrue(output.containsKey(ErrorCodes.ERR_WRONG_DOMAIN_PAYLOAD.toString()));
//    }


    @DisplayName("4")
    @Test
    void HcxOutgoingErrorDetails() throws Exception {
        Map<String, Object> output = new HashMap<>();
        String errorDetails = "eyJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAiLCJ4LWhjeC1zZW5kZXJfY29kZSI6IjEtM2EzYmQ2OGEtODQ4YS00ZDUyLTllYzItMDdhOTJkNzY1ZmI0IiwieC1oY3gtcmVjaXBpZW50X2NvZGUiOiIxLTdiYTA3ZTMxLWNlYmItNDc1MS1iMmI3LWZlMDUwZDlkMmMwMCIsIngtaGN4LWNvcnJlbGF0aW9uX2lkIjoiODU0ZmU0MWItMjEyZi00YTU1LWJlMmYtMTBiZGE4ZGFkYzk1IiwieC1oY3gtdGltZXN0YW1wIjoiMjAyMi0wNS0xMlQxNToyNjoxOS42MjcrMDUzMCIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYWExZTNmOWItOTBhNy00ZWQ5LTk4MjEtMDMwNmYxYmNiNzQ2IiwieC1oY3gtd29ya2Zsb3dfaWQiOiI1ZTkzNGY5MC0xMTFkLTRmMGItYjAxNi1jMjJkODIwNjc0ZTIiLCJ4LWhjeC1zdGF0dXMiOiJyZXNwb25zZS5jb21wbGV0ZSIsCiJ4LWhjeC1lcnJvcl9kZXRhaWxzIjp7CiJjb2RlIjoiRVJSX0lOVkFMSURfUEFZTE9BRCIsCiJtZXNzYWdlIjoiaW52YWxpZCByZXF1ZXN0IHBheWxvYWQiLAoidHJhY2UiOiIifX0";
        HCXIntegrator.getInstance(configMap).processOutgoingRequest(commonFhirPayload, Operations.COVERAGE_ELIGIBILITY_CHECK, "", errorDetails, "response.complete", new HashMap<>(), output);
        assertFalse(errorDetails.isEmpty());
    }


    @DisplayName("5")
    @Test
    void HcxIncomingRequestSuccess() throws Exception {
        Map<String, Object> output = new HashMap<>();
        Map<String, Object> payload = new HashMap<>();
        String outputPayload = "eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfZGVtb21vXzc5MDQyNEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDMtMTNUMDk6MzA6MjMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiaG9zcF9kZW1vb3BfODEzMTMzNDBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImEyNTJkM2NkLTcyYmYtNGY1Yi1iNDAxLTVhMjkwZTIwNWYzZSIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImNmNWE3ZTYxLTIyMDAtNGUyZS1hOGYwLTk3Yzc0NWY1YTM0NSIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiNGY1YTJlMzQtZDhmZC00YzgxLThiNzEtNjZlNDdmZWExMzFkIn0.fpTkYQcd1NqCVwBYVxV1ZJy8eaK7oRMA_K5lYkfrgaeHZ8cLGn0s95E4UnzbotRaYjVZF16w3_SS8KVCiro2fDjWmLQY2BmzcqaTqb0kHCan84t4_e0pJJw6GkH34bF6YQgYs_tuhIC3WXocBssIah9SIO0Iy4kptpYBF7g9sfhl_7EpPcGiOl7zXxXbodJ0xidJy-7_qU9z4oZ1LXxgQlW30f4k499byk4Dtg91a2Z6BiMnb5zCcQO7OETYMwom7om5XHw1_i_LG9Bof5M9fFvOvobCFyMkQUZK1u6OdgB4pSq5rA0q_ljgzgKsuG6WOzHA85jwUHFf8Hmt4qBbqQ.ocem0ofd_RdZeZmS.L87Nl8zdu-t9rVOuDJAwWGxcQQDpR5qMiBzfLtn365x6MedkDwYzxU8QAn363tggexm31TmjASadsmecapNh_m0lz5mHFfage6XmmTEnDUKbBhynbnkQKRg4Y6YBnWdmL0T3mkqbsdjFQ4dtRHtzJ7hlgjLrY5H131Pu_bqnsaCMEPVvTF4I344YQeUCKd6npP4w_r2HYz95M8MbrCSl6Fl1FItsM3w-ZcYr1wj7mOsKsm9fKEGqRLv4ky88-e-r0orz6YtLbEGTXq-PVTzN68KvTn5Wj0NG412sdcER83imTonCVwItozGZEgrz8WdAM-y4rrAhDUeEsSYsF2hb7vunq5G4Yuap2D6FEQbBvrqnvN145RyV-dFDVuoubrd33hElNb4Q1u6NJI45PL3K-d9lN-zzVvSCBcT_dOpbnzfJDEaswmCqdAa8vVssUpI_QERAYNYVAjlzJVMn4Jc3AD1x5dsY0j9Xs_kusnpawNFwiEYTzhi0RfmJTujQNU0eLDk8t2fPoXcBaL2QFFhAb1jxKdG1CwMPq_llVtfmypTvtuXqs1pSLaE5jYOdT5Z58EZ1Qd62BmglBTz5vejuiM92YsRUV-g44EArtHteyQRHy6b_cVsd72GBxW101EaqyQB1w73BeGpznA0rbwpzneyLmB9UTyjkf8e4QOn8rBNdYjiPjm9XclrlXgGT0F2K0VDI72OcgM1kgBxb1svt26gkQ8buRF7BilpwQRFyRgKYK4njCcfigEzzJStG5sRnbynrPxR6LP5Pekcvl0nmibYUtfMMWt_bGcQaIoF7iSsxzMmozawZgnB3Lip0pa_9DVNrGu4QGNJKZBEH8JUc9QAiAZWji2T6R7N07axi5OlR_Gk-R3fVRC2sCS4xANLcnv5x71dlYPL8ehKlHywPrVWeEFTKGEOO5BawrcVbL6_LSCE9H1OAr7UxB1ad_fYCbMpGNegpCYofWmAX0AU9U7dezTIK7JWn6yQ3dIP3NncD6u6v5rM8Zr8uZjExMaElsLDWGPkNHLaxDn-qBdnQi2tO87XoO8OKu_619CuG-v-2VkWPlOUia0tir86awzXcSxVj9vziGso9KUl5co77VclVrbYi7sGKRW35lEq2g7xxkYFS0XnK1CeBnYoXiTuPWGlENl0ouPZAXlAhW2ljydyl0BGbSTToWWpFvSx5J81D2DCYxO9rhnEiM3XTg2PJe39LC6PFLwrduzsVm5DbGnqhb7lJkGCY2RnRcrxrWwh8WKb3MCZZYkMQkRk6ZvWpVTmns74ZILvc7lTlLdw36XFRWYdBELNYdlyH-btNJ5j_mmCHUw6_d7bwvdvo0JvlfK2BEi8QP_AsJkMYrRRkEX97RS9Igm7XrccdqeGUX3bRrNHu8-7dMe1FQ-WgxYsANsF8ngMlIuZyGY4sNBplDtMyEAioBuEZ8u7mU0EESxwQ8y_kja1WmPgUGpkjP2AIeLDt5qNrCCwWrzKpUgKIBtlFoR8RC6P-gVLZylBn49MZLxzarOxlGC67OtzzAzqsmm1hw4olTLNJjlZJlY-iLZqw-EggoRoZi5WJ_wvmrTZpDOGBueWfqSImpvXTrvO9nuFz3WVsqgQNTrw-TrczjArJdh0WegOzgsndHLAcK9L4ep9gPfh5MuCqaixvh9VAo-auznB7PHV_sDgdrWUqGNZQm0A0K4Os8qkD7YxUt0oZ7AnlORydx5X6aGOeB7-7n2mR0ytr07PLUhOxOQ_9b9LI-a7nJWOnc5qbfpJR4odcWboXbuU_qed8lZausMP2arMM-4ZbNWqPFEvsmC-xhVMob8e52Lm7zLqvPoa4IUseXcgyAR_LTz-q65xKq1kS6clLjGP-pxuDpOoE7az4W2-jzSN_AL_9BdzoKnBZqYMuKYI7ymXAdGJ_wHSfgnRCd53Or7ALBPKoizshqLpuF0RLDFRtFsEFYKpW7zLbYp3dQw3rzBpcnEa3Tp5NuvOcDCSJ33KXyff4kY2j49dKZ4XIDuqSNFoL6xwAqVhZBqzn5Kty4tSvxlrE48sU5Q9BXshMkuLLd4PwrceLWsRoL52idwsVokcSB5LUlgJihUKozHksOpPdvX4KBgAwjczojduPWiaDJKtW02E2kagkPKr75UPDatqKs8fyRCTsxAiKt-ec-I6gFkVSaELTt3VdV0dl3lQhD0nbsEHiZ3xdP2RyMnK5iVr1N_dpdnVvWEmpgaMnAojkDovVDyqBtz_ybRvFPbJScvl5HEfe3xLb3mfezss5I1Vmog1nyl5iV32eK7iU2Hvav3SDFMR_Og7SrEt3WEmAjLvtgWLG1WLkeuVIRoZpP1fscVLQLnVEZVYyy8417hCgG0Ty-dM2oaTHmIt98Bznj2anWYyOZ1bNdUElXAkfoi4TkXaYfWNrBWjj7tx7l6vjZ0u_p9rzIJ1ShDOcnP09z_Z0JIGCwPRCKguBryV2jjSAMdKIhbGH2sGYdPnChOwzPeRM0_wymNSnaPuMD-HKvYQXQuoD4l0L5uGHSt_oZgQ-OypZXbNx-rhXrqsznWWNT4JcJ6uDBOCLRIBAbQe4Zm1xElmnaTBfW9_dtylX0OGqP25NvxtMGM7_D8AR8x9Yy4Q62TB_ev2Yq_6PNarEV0EeI7LuNePxWzWwcZ6-uhI47WqcPqrB520GMXtJ5k7CnSh7X3in5NJ-M99bCBqiyNi1hfEpkoHvj9M1QERZvw5nlAZxXSWJJZHB5_QO0RonWNl3IDXb-dL-wdcQJMT8zZ7rqGuWizDqYEKEA_n37NL4uleXnzmG1MH9GxpY723TpSkXOxy_cSQDdZGZFH2ztS7juIjGUCIxDbqQtKzJ01o1Ys1Ca3m5qhz19S3qAU0WYkqm7Ued3as7kLn5GaaLHxwcysUu_r0TBUA1XoRzTEYmUGHqY61zayHTUReKtcNmlaBlKEvXk-TdgaM7iwoAngF_LiAWGTO1-PLu4BIeUdNatbFeUFIc7nOsDcFOoRHwYa1vvS5Aa3WQ9i6R69IDwoBGO8z7VL3nk3eEwZlUXJcYVcdoFSeaDiV-6dVIxt3XZ98nOXcgVOxEmftYM3jvtMAe6AdpQIY7fzh9PnfGQjJtiwv_h7BIKGr13xCu1nBfdCKLPiW15uOQ4uLWzOdmyEMvaTTCyXxEFPv3n3KBHTVV8QuMboOhDvdZJmzDkBPcMR4tQmI4IBhYUwNTUk5KEF5OHXDm_urm7JyRkunEAyZ_Sh2yHrscMjy6ws-37nY0tY3H-H99X53YMzthGN0zlp8W6tvfVu_bIVr8V-1OG3ELqncaj30_PoNPzBvfB0AVkdfnKyWE0QqCBfn4IOSacTAAP9ZI-DX8u2FsDJEcmDgm8QtTj8llSypmAxZYRca7DAbSnHASt63Jy2kcSCdI2Z4GAfDPuFefcnXYpQ0jw0Vdo4S4f_0U9EIMIoy-55cvEziCp56vNBMfKGBT5X6JYBcqTDyyzowZDUL9gz03-DS2kmFb2h2hXn_aPoFqIKRHqKrxBvF8xRsfnxpRvDhCtUJJHqjByhDkWpx5xkufoBaFep63IiPA87-_4w1Nel1pk0l4V78wXujtUCeqaFuBsELqYxiGffu2YJdgCwKQoviqjEnTUlfUw5pgzpgIVsou57bTVEJTG29f3acSsZtQxTLAHOKAwsYzohKNg7rG5EE9l3SO_utB_Uek6wzmnJXW_4bJg70QR7cBcx_iYmpV4h44m7Gm-bs-NXTRLyMMuAUvqtbFXZnuczIaSHbNwiXVK92YTnWlhZgGffu93VJcFb6Hy1o11u8qQss8zdS_lf6FvgRmAmxK1qbQ9V_syNK46p-zFyYdzdn84tHa4vlbR4B8Fbm_vDrNJee5fyEFKtAQ12BX8PoZdMeFUNJ71c74lvAXMGrtlgWoSWTDnXZpHRDT5wkkkIdMz37sWZHOB-GuOEu4poG4Kfbc0l8YXCwWRn9hXZVQFXuzFuntYroN-Hw_Lf65pJL-3hZxgcvCmilF5OT1RBtDsWW6DrwIiLj5tGwmpfiMVV3yUgpfMF7s4uqmF_fqFwUi4CJq1WbFfZSjfCYzYqs1MxswwDhGdJv9_01R8UyBB7r_P80OVU3uTLziuXc0unjdRQJFBAljB7ASvMVkAIk0YKNGlKp2ah9KPNmCZg0rpdLH1kXH5qEiPPFCEvgwwICyxMIJ1tLbS9WHPMcnfhe4LepxjYVwFLLkO0_nL8ICxNDlgbUrdCLg-KFY7gTXa3vTrKDVyhvkiASM7YeYWrifKNAlQ8xYKfJBzkdJ9TGe4wNOr9NQb_3fdDtap0fiyx-EprtIErP7X6iGCoqpo3Js_ob65K0JHCDSFbeFwVwjDwczMt9xWo7-CnYqPzyvfx7DD2iAsLijKIW31MX5s9wHYohSkMcbb4HK8PGp42oLb0t5UNokEeKc1EYcIvks61fG4t3mgFtV9E7xHJOTO8KP5-5sHZPNGyw0KWwlRTj_9tRkgjfVVKSfLU6Ug3Umbfsn7YNoNkorn7gYi0f03ns_8xnJYJ6sSiQ799g3fP1sJuzRXVk0tSMH4aNzh0o0EOmGapP_cQenuZSpoXPJzTpcHRAPmh5FJ90QpWFgNwQIjbF6NbesvKZXPRevS5jTpCFe2NIGWo3B2heJV48RreCoVmLlr6thLRiMW_qIQyMTVnsAqN1jJHFklo6yFGH3Ub6XqdFpYvhlUcE2ml6zlCJ1dYryzCWGU-zScbEpwWph738QnlJhHTSa0exol6q9-S9191kTnyENQHCJ_gjUOZcNzJq465MP0k_bZ0SOaBlk0n9mDG0l3yOs4WqkWxYJG9926kaOFxHF1WpoeYWQueced8y7KBmAT50ZznJlXjptalpoTGPjzP2IYHnYmF4xwdgVTz8VoHgtRK5LgrFVKm8WClBvZjsCl1MqS0u9S0t-eoWcc_eSSZy_R1536tsSq4e2L_7SWdw4p4bqLUIlyqrl_OgiBaXltjAxzsTzUEytRv03nkaEceQbDNcphpF4s8P-NeMPsExBqpIlPlm7Vi9SZ8yvuk_a88Jc-0s7-a8LUatpj2r63ETyDBhaEwLQmFPYEiQQ0dokAqaT_e8FfWleA7P8UUJIaPCHEQQecKgpTh3O1V8jGsQh0zHi5H0gFJkr0LObN4-eCXnuRm9qF-ACOzQCFwx_TU5Ip97qB_57HVUTMlLx_O4azyJOqNvba5kQy1gu6P5aVKlVpUF4o3equwh_4VUtxhTQmNrh7-EpBsE3FHFj2ZnMBDcpCiRWQANIxiF-RZVL5ad5R8af7Qw48hRAKrDdDQg0HebslyWoKZ5W27HCZA8_yeq0PkKO1U-bLSGpBQ0QwJcvTE8Wfcn3v4X1C5QPbV9yQ9cTQ1KXtYOKVpXtEzvf5Up29XrSf3OeZ2X88HXE9AcuLA1vUKoC9rdAiSmINf2gNk6o4NvdlYNtRqmR4082z5qaih716Zq_Hq3iS11Nk-Vpj9b0oWT-LIXr_rOeggWOkEMk6TF4PSXkAPj8dp7jF3MsinxMlH9jlsyfLBYpB6LsgDXKDwSVG0KM7HkQPbeJQDW5TVcYUV8Rd4twoup6EU_NGX8SG6gTCgffX-zICZE7pD8fDJw4qCQvyB1WS9ssotRImF2TOhlp7hwQfuWBnf5nInOyfDD4wwWT57k70nN_G5qrOfHiRjjevXPKVxlMCMqTkhhS9XULQ5E-xuuuaw6UTHJV1_n-L9jaClou6_D7585H5qVTEdyXgUU0GzvnQ4Fgy8l1hByCi3PjKHqZL322nWcf8MRpI8x4cciO1ToMUiealEvo7q3RMsCwQDdBPEJxre3umyMGaBxSIvPawsKB2y4R8mdtcNOfDG-Wu7DsF2fmVd7GfHAOvj3VeFqinsT_FhO43NpH-ygukMY-yZngJeQWbv72WQIgsP2gXXkRQKe7MqxYF8447f6YZBQEmR5GTsGs5A5kDUCUD1pz7V0U28-rZhp2RFQBRx3bizvv6QA3uvln585iwmUpc3Lw3OL7reYRAUNxI9XHbGwRvwoPpl2CR8Eu7hZDf5EUdftg4oNamgfMzxkG1jDXFSyRRHjrZm9JRL2On_rin5eERAIfcfTbf9_CVMVP1x7sDdmsv8-3XYKt1R-R42DheecinKA3ndkOSGxXK8IbtQCOVHaIIOg9tZphmOteFPYwlzIwof9qfwIlYK6i_aypcCm8od7O0EXMIvZf1LtL97_v2qSjAwqmaQbtVVjc0ZMihzi-zpw-lq6Xn2HqtmDSBRDaP1syn6DkqgrcFeVRa8Q2QSoUcB56Iux-lzSGoitiDAKW0zAjCc2rLa6Qd7pGD9T80NJtki46gvuXr1IZYslKeqcYIOZKRcDU7hRMcHyaWBycxQx12BpP0f8PaNJvETlbDNTk7DqUjm5IWapuPO9zWmmHpk8KBNN8pDbKf3fedpQKFRoxsgCW6PhrvqFkKfA-5Aks_QMSNrapMN1sQfapJjjoPRv-cebABo7FkzlzTNXrBvh2PfSEr-mzd0aDeDL2DdzPhBiDxV89Sj3G73m8N3jz_xgM-D6zc3c2DmzM7JkNIUIpx1YIuKTOgIj6HKyvF957jYqKtBQYFWxNU7g8HqvOreHAFc8uFAcTwdaNxmZhW4rFFekGax45GQoYGUbZefKLBA2kOZAKQ_0YYxbQXxhJxVbDStwNIPVXVp4p81rHPS-4-Fnmdt9dGZ_8WyDqqifWeoWToEFtL-WL1fUb4ngBxhO0qE9QO1c5GdrsIJ-7lkVJ0Fgu2x7STvZA25ffOjneYg3THKZzYqD3oszihgPWUMrL-8u5uTh9JH-XGCLCppY1MzDa7W_Z6MurxD61Bch58JRuL-lUr9RQn4Ydw5ARHFaeFkYFZiM9xM1tc2mMpuhy_Y7gHs-o3crl3byoHj9t6rBDlZcdm0T9FEMKP6Onwy9opU8qDmAcNkp_vQO6yZk7rh_Po_E4AMRxuhHakxqKrVPCnrKaPoJDp15qArVfdKfz316zUpjXAMW5GR35KFJBEnXXTs8G-RZflDl2YDfmsCbExi1SDkVHp2-fvVRRF1CNLLdwdYrGkxMRkl89SU_5nvQIO27rWLm2Rl8lhT98GXMzZ_r5rffpNhtg10uV2I_AALVcB4e5jZFpPEWLbcv5k9DE2mJ9kH59jNQrPv_AxIrTYYPb0gdM9JcbbLJ70pwkAfY5rxo-dt2NZ5iwTwl2kYDPZzUkSBVlF-vCXkNRhTMBNhnrx9uQ-0TqsT1LhVxwsed_p2rMCQ1bUEOk_BiEqocfAn39l3F_jNignpSjSOUqhYUZ5buYF0BxlPvlWJ79TuBx98qH-I_4rh2ume0decMSNY0rbkpr--0tOvaBLzlo576P7VglHwpBAjKcdprN_AOR_17ND3y78LHrSiqpFZzHI5VdEikIntk3aklwNRisERTSjYgutBmPRLfp_rzVzIoOIpH3LnEnapkEGNyyA_x6jerYRhqMV2HmTQjFCpbA5ANUeYfSDgKIf_Ir6rMh0kxk9G3GSX-nf7d-yh_TrB1lSYLMkHD1nN-Ugi7fQ7gB-PJGamXhMO64-TyQ2Z_9niXfntmyy0Qjy9xakQdgcsGnLCVw3q8SbBMUI9GWGaSQh3lBppYXupYTMVdICT14PgsoHbaVEftL36LwIgkbRAoWiOg_gkTqW6DnD_vy4nk4CCdoBFkyUfEhLaaFjFYYjei0M2El_3IGuIhFJtvB6G5eSgmNp3VyopzS9-7Rc6hMgEaEXNgcBYMVV6CmGObUFEEw52CclAQOiSmfmD46y71AmIbgrT7PUwW_QBbF9YvMdHjXn9MPmjLr1tEdZJ-wGaxHdTMFd9B8r6rXGmRZgACMCdvvvn0LGl41-feGNXE8vCAzym6Judoh6CNTIMMLQ0nrFEJ416lJEjrgg1ya8y4FNvJ2Q1Hzyb5YutfLWaQ5MzJ_kqZ4ZShaH1jOU8Av-uQBvHUtORFu-or4uLIXSLxqqRpW7tWLlvgyxPdNCXSryNU9W6kWMtQvaT7iFhNMJAnywb0VUh2-f7m_MO13Cliv6EAD_rZQBOxx8hdwaswwbPzUTFSledB6voS5Z_Ekl40PuHCgO5clRenCKgiftiue51TVxH0UXFVi5U62Tk0lB5uPRyIu1epNpFjouq1ETKG2QJR_RCNnizMGEoXQP5ftsHmUMi3QLjcqBpm25mrdwMxl1zAQ9rtYbIL8vIw28rUAoGA5xgDpGPzQyw06ob77facxDYl_tNgD49nLnQV514JRtbMGgNXXpvV7esYhimTl8n0hwB3pvUWwVTs2kWXfU28odvZGVvisdCSxA9bN3_Rxan0ZCH1qR31GO-jMgZpaItzd4uXIcjGwjt3lNZrj2kJTTsMCcClQgaGy5fIxpoOw8S0oy4IPY6SYCegg-QGKWZc1g-dqOeqjKnkkJgvKyxYkN0g-tIoklZPHWF9b4st_0r1lX6ga-uNZnpwEJY3F7poHl5AcLaDLZPPeyHJPv7LcemeglzBXaD3JUU_V92uNxXO62Q7ieDG-aQXINNKEAPL5eRRJJhrwL6IeasyaUuZBHmJh7R8TfllweeRY8w_biKf1MofO4RMsn88M__d-1rosgSadCQAMsTvPKtWdpCvF8d7Yt-V1gjoKLki7sh4eCeVt7dX2uDEO-cToma5Y-FbDkZwj6-DKstl_tLOP7TdMTP2UzK94_YvbPFDqcRXNmOQI5u67Wtf8auJxmQnw59w0B2nxhKnu_jlGyoD78YSHsTPvmD2Ly4QUukyhG0nGrbYhL9Vp_0LeQnkX_UGFn8iXH1WP4_YFj1DoP2Fth8zHGBKemOr-SsMrDmisdjTFL0jPMSPL3MZ9CM_fjGlWMJ_zl855dAw_gxK2dB0KK3ZBwluX1pEKvng902mtVNmNf_WHnzWYJm0A4v-07mrp2rb9x2-Io9noOxRJQykhUM7ky-7KCBGy6Fj1vdU5bVUHSm6PLsavLykXCw6pnJ9Hf2EBVtOz_KFLcKorOkDwTy6G3A9zJLQbdu5Ob_AMCH08Axr0KUL1Ge8e6tVSwt3jLrky8Ol3qww_Rt2dROFq5Xh9lYJ-c5eTxNqeHsMgftTZ4VSoNt60hvUTJZNZ9UMTomhDWVjqTZ6O4gAghKwmM01DfPFt-ybZmjWmswDBGDgex9w7CVRltK-hjOQRULUqBIrwPYw4jVvvDJdORFSifEd-GNM3V1gjcgy8wLe8fzEF2AlkNs3k1qy5B49zQdzfpDLgnibJ3HpEsXpCGCGVMT4qh6JSRC7tFYbcBpH-L1PgrsR9SzLxtcvh8dvM9PFFbcp_HCobqugldeKUWHVnq79KddP9z8an8ZEJCCiBEhAH2v00WGK3d2CqTwjsKMjZFnt1hbJmgpf8ch27Cj_IVXVMorbvfjf27bTR41-ZvfJCfqESdreRYF3aIw8997CoYJIotlfr4lud9QapYsHg5urFbnwV6gkpUI_ctdaWaavqJjjPInEN2zHGLJC4OT0i580pGtK6NTcxN9JLnWgp8Lm6f0whIFR8hPvzrQkubWzDpOfIoWnkSsCeA7N5kcggre5ueTTM0QQHoDPp-cHRU5X0gs9bjKQfWE7i8b2lTcsgBGejlAw04AIrWfjbmg6YkAZu9gRRv-sVOqVTXzYm_Nna81ZdcOW35MVNV9yKhqzatYj3PRQhPt4C-quVJaPNMepmu3rXG8TNb_OtYkL6kHxszok3gUySJfo3IIrl0IRtvPFyM-TUPAuIqYkx7h-iuoNDEjaKhDMgS3UnNdGIydd6oR1I7BHLrzmkg0b5jQiz_S2IoNXNV0S-t1_FXGMpDLPjxG4WDAREU8N1e5vOgHtVqRWsBNB35UVWmkKjC4c8IXJDqQ6XbewaWlcihXlfh7ZV-9wdR9ThYeRtvMqT8u554vh-wB6sVZ_fvs_WDgHROi1wrnEze0Ed9uoDv7QOXzurCHNxQGqcPSlHDmLdAXj3aGPX5ZcOprlp4klpc2V1ODizJ6knXSbRbaB9H3kfB4ocr5FUSxb5dx9xE0zlV72xMxKAL_U6ul9PwqLoqqPe47k3vn_onjtC8dwhj5JZPuEcxTRVsGrMDUqinB9jipdp1jp93CybAys8aAivBZ6wKvRqh65mk417lgxsY_go1lf5M39iPE0ckRKt7PVsshHPlWkUURSMoLbr_xKvLGSUBjz9qpoNdSKW09GGW9Du63y2bUl532ZgCgC4Y0iQMekLNye_ce8VvEMSHlmIjzaeZibhQ4cl8OpU6piZr9K_AOu44AD2Ep0CaEYPgMiAshYBmkJu9EtbWindtdvQI6iPUnnQW85PRSF2wVJbk7QbgmD7OXsJSxMy50JiozdZqg.70qaBQE3P1GBlhdNhlBZBA";
        payload.put(Constants.PAYLOAD, outputPayload);
        HCXIntegrator.getInstance(configMap).processIncoming(JSONUtils.serialize(payload), Operations.COVERAGE_ELIGIBILITY_CHECK, output);
        BaseRequest baseRequest = new BaseRequest(payload);
        assertEquals(hcxIntegrator.getParticipantCode(), baseRequest.getHcxSenderCode());
    }

    @DisplayName("6")
    @Test
    void HcxIncomingOnRequestSuccess() throws Exception {
        Map<String, Object> output = new HashMap<>();
        String outputPayload = "eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InRlc3Rwcm92aWRlcjEuYXBvbGxvQHN3YXN0aC1oY3gtZGV2IiwieC1oY3gtdGltZXN0YW1wIjoiMjAyMi0xMC0yN1QxMTowNzo0OCswNTMwIiwieC1oY3gtc2VuZGVyX2NvZGUiOiJ0ZXN0cHJvdmlkZXIxLmFwb2xsb0Bzd2FzdGgtaGN4LWRldiIsIngtaGN4LWNvcnJlbGF0aW9uX2lkIjoiZDRmNTZkNzktNDkwOC00YTk5LWE4ZGQtYTNiNzMzZmRlOGQ2IiwiZW5jIjoiQTI1NkdDTSIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiMWUxNzk3YmQtZGJlZC00MTkyLWIwYzktY2VmNzcyNzI0YmU1In0.NSYks0P3BizbgpGF7GctpBSFDfSfap2V7AnZ5YCQMy_V0F6IZ1weRbZrBLHDTnPwPOBGGfctXpyqiXfvldMjCI_maakNjagsyC2x0pFC6NGmYhTwjqWmpL2CCaneBf9HikqwuI2cJTK8-DNOkbT9Qj8j-NxyGv1NX8UFI1K90t9e61qJ_Xurp6Qrrt6X_fiW7Jx9Vm54kCS7ZUfGK2rw_EOvc1VydsdWnUABOcmbtcTJiSVecNdRYxiKAIsiZCHULdd92a3hzbqFbyfRu1GqmuEyoimjd7jvdDSuB4bhE6WCIF-wB9Z5d3mj1ZXS8AEGT9YuSFLQTyPfo9Di3-Px-Q.0MliuZkDRADgQXY5.LWL2_vhMA8BEYtmg8SFXVoDNWvwWLZcJ9KxOHR7VWdIRxsO7PfNk7yMhctRtmAnyaaNZYZb0e3nVTai-u9aSixhmbxq6rFe3an0HbPi43BIT4ytal-CRxWoTaoBMZLmNqSr7GAvAXxNxtkSpDRUMlGg-tGdrHmcW6b1KAbA2CxE62XlaMMt5DNarXMSBDMx1_Pz0x9QqwFY-8O1GOIwPVZF59fh2e8ytlsvTh1fgiMZSOLETzN5pgCWGacc1D-tSmDD5kDQZm3SPgwZMbkco2xmKdvfdZa1AX7rDrYO6Pl-WFxv_5SO1CWwtR45tsCCp4pIOv3VUIjwv2YlmoTgXXg-EoLNgA4N8sw4kXLNtV9hMys2JdyQ93quEcFGnPO9jMg9seAT3pq_llpkN1FqE2x7zwWFeAs0g48IFc-39td6kdgOnuVEVsGAyE_OEst8TAhvRBa7EOeZmZpM1fiANdLor2xKWOI2K3o52R2XOYnchOWwjF07eWOPYulvSZQPBc1LZ_1j1myJz4qNH6aKWxkFT99FBddQ_UA49SgHRhYNScs27Ycw0BEZso9UpiXoLDJUKIp0Q717BkM5K1DdwYixkIMSEAM2HZHRaD0fk_8C0Xx0C1WxpZAhOtjKkesd1O2iUA2YbOyClgdASSUjO9KWrSgUevdHdorUDfYjvB3Kb-pjpZEyU18wTUTMg1Pb8Zjwluf_nuYM32K7N7TZlc-mdIwy8VX956eO14hZJNLFAiaf4xQskOCPiuahxD22kn1wpGEbShwE4TJYAsXTlT1xhA86CmDZwxaXSGzuYaNcpsokFCwAPkJ6axQbkPowO_CYrY9Ma5s0fwqdnCyZeUCl5ugeK-T9DtzuXBPsXi5eVky2rvqcO6cXCGCdrNfKXnc7Ehwtrv_ZxaUg0ORk_qVuGPWtfj0o9Ww2hUe8mXh7gp3d74jkDwNHV6X4S4qLApICRDU-Fw3kHZP5S1nvunjE_0FT4f3b4-SR_HAhjwl4-Rw4pRbX4Vu--CK6NfSgmNsixyapPm28tAzDfkHTDhRcHUi67fwGTEYKQvdk0JlV6zPSPopot2sRWRakyy_31oPCtz0qfavP0YT2dJWYGR9cSaJYIxz6S2cK2C0UOIIZw-TGX5zOnOzha1F-0Q3xPOswpHczoe-TafW3F22F5juRoNk7mK-BinUc4RBfBUkQWi6xTF32mLonuoeUkDRamMPX35P8ejYzBB2eDBb16QHIKyGl8R0aV_UYU5C661dG9xKvGJ98VHzFcz5j1J9WutBaMAeTRtROqRHH00psYa0oP2M4qVWR9eEP-jK9jtL8CdFGpNOiCtB7yF9WfE9N20Pqry88TODVMiT-MebZRHhvV3WCv3A3ZMgtVRqwaPoFp33I5GEDYuqDcHED_b4qZf65ZLNp5ptBSA_faSoeUJiRKRm8fep712gWgDS_fDmhdwfgIquY1fHZkofED0k_em28t0EAdJPpv0QqIKcte2vHkl65ql720YXWmYchBpDnclEMpExJg8T2CSd90jHvypi7KaPX2ahKv9zB1qlBTOFST4SWH_2I2_Tfvyhdqud7-ZWO_KFX9blDlph7WVs9rfWXjWV6zPEVquYDL-dJw5Lbk6mtHp2W7Z0ULHPrJqjLfqwjo4gcmD1TLm6LMVVYi7B2jb-_Vum9sxrWkIvVILP-LoCI1MYRvCj1QjrmO9ZFfqAGoIud_BYDKbnU3NoBJ0eWsvucGhrzaZ4-BYj_cOdUblQu08kmCHuxdhzSh8rZ4-vFrQ-9ZP83lHDA0tX5_F2MT_LoZQhph_NedK1bhhzBPaB4och2sY83So8dmgfcIlJXOkV_K6jO517pkHR7FBO-vQcD4850F7StoFZQoGRC4nqPTX6jCjMCNOMKoN1CQ58rmXrAI5LVtfo78iErXCXpsc-IO9HPfRSK-6PwA7cETFyy_To8ZjgozhJg6XUjxnYv4wD-9SpKMJwH39eihFj_bXWhXoHeZmXB8_8YSPf5L0ADirzoo6Pkxr6-zy1AmfNFrGXI-Zfb5BC6mRfRM3g9cTLr_fN3tESHnm3wzSh5dO3gpSHhE21eADFj7A6be8p2BgvvQl_ecm6KwPyO56-0HC4jxLTgZhyhtDuULWS4J6EPN6p2kE_EB_x7N5-RibkqfsbGMHMIRjKR7uzliG-WeYemvBdtkX7AmGuNVpRd_30fHmnE_yZoGdcrJjSeycv5EdqT7CeTBziIK2R78REHroEUJ23C3lvbfrH6Tz8XJ2ktokWxPXRqbwoqd3tcN7T9PoUgSvuSLJ32a7oMGzuYYOTS6JUWmBvGihfqKng-Pf9dxyZCSZ24nhxHNbw3HqW4gKI5viL5d9jUPtaT_GQKOEHNJpDeVMdV7lGgCbogkg5l4te0onSXDOCGEdnSvS3iuqtvT4-zo9tyrWIjUl5NQ8sZiK82-Nd_szEXjJzG88Xq6-oTZEUBqryI0FZjYNkE-ME-6L-zhR8hQdxwAwNMFXHW3EVT0ScCVYCo4EAGeQnQ-HnBEw7MouFlRLiNAf-50hOUBkBau8O8yHey1nrj2bsaeUcAksNUnELXiyCxhKemwFiZvLhCVgh5TTbVYw_Y89DA-MM1zwXC-k6IMqSW7JeCZogoeWr3Zx7l4eps0OvLUoqrAFV3ll8I_XToK-Ik6VQ68VdPj4GazF6cWaXnAHLfvJG_aXcGrAYpZtgUgClHOh2OwHZmCZMSYHdQCxQimnLelRfETan7cqYrkEaWJYUgP3UC3r4sP-JqEaWyYAoFvUoQ9G9U4msM82pagm3qmlXSSbKLPSD3tDwXXPJvZWfghw1VU8ZFpmiLKXanJ5eifWcwoDPPIuAAxYfKhsppg6S98JvBXHLkAchNovaxpjZopRMOkB1kjGBL_Y09d3D7MosAZKfZ6rloz6pHtrHz2RK7OaLQnrKZGVvYm3kuPRexi6p5gQ0wdPNMUNUU02FXBE1s_EASMX595qZE-zQ70Sor5l7YQ1CtM0EUaks1sVwRLyt8dyRi-ezsr6zNZFE4DTP7LUF96Mhb7wesntpOEOLTHeLbAJcC4rXUIN1guzU4vxEa8zqUzjEKy9zqQAUZ2e1mLpGDSoiYbdYHAmX1KRpfaTiUg6uXolUA60Vo-LAzlZ0ddU_NXOJJNSkx-F-U_0vcblf6qxTSUp35ppfxtP0_859WOIgWULId4jSEvi0hHUh2YGgbwh_uIGygjzISEHEdDHJ5mKDFrsGB_Wsw8VSM9-dPvf4C_ShvwxUkvuZh5_A9sjjUoVbz5nLcgTTsMMgM7xbwq-4E7dWKKMFy0gcy856lu5BlAIQ0VGtt6Cx3LtJ9aqOGchSiplhka67509gHuw33iPew2vdleAtJ3TAcSXkBg4Mw2dFqfWRH06gsm5pYjN8JR6RZHrxv8ldssKvV8E6udVUCRE-SkCMxbvCbSbZxNwD5AkbzbKlqf9pCtYNe9ThlgmV9HR7UE6pWPefCloH2DGs-iRSmWLUX1nyqQgs5KOX4YkWAi6He3IMMoFTL1SPNg1Z77RJZAYKvU2Hu2OK5mzUvyFcTLA3u8U6G6DUFjM3NFdhlEaxEbi6pAt7ChK2rRtGGUgJEEhIXU3_yqj5SGGJNplh576m4_Kg0o8XGjmz8LmbOhZflgMrVZsQUJ4UulqWpBOt5PBeBYhRNTi7EeBWQ7bCWQHYHdxJlsGb113wliz9vmtEov61LHubQV1-AAm-gp_FDOCZc9P4nv-auWzbxxjpdHMfngYPkEx6mrga6kst_7RsTkcedKFYjppmIKRtAi3MT2cBcsBGGblqdJ4tT6BOyDRIo3g8mw8RrbQeSKE3w27-tX3F9vJ9c68OMJ4vRsDHXg9XzIozhN7S0Jure-IUoOcG9XpgdW9xHuH_kcb-gg8v4MMRZn0EzPZRWIdVTpxIy7DWvHGgqYIG0JzKCXU3zaCnLow4XtahxVXWH6FNTi9z5dhiMPYIasbCVHMGmg6mjk5WwH0L2zqGsRBr_26ghrd6Pd_yxKk68IrTK7NCsHIvQHGJoqnepklu86AZbb0bST344sXJu5ulkZXMedg9JwrDSNAdmt0I57JmqEG6-29YUnC1V1IysfdttHIc59SNNHRrM4PtLh1_1qwJRNoFvJ8SxQv_GEd3GKf0tUv6kanuOGmof9thHRAozrTDhlms3_qrVe-6OWWAEiapvIRbZCp-unGW8xLHD3bH2pz47dZSTIme3LVAyNALhVV-u195ZUXz3yDKXsR1_uHBbvhk8-4PVKC1QBuZ_VF6frsYSIqoNkbOkOrNGieIWH56MnBjgaUtTYpAFo4U8zaX6TXm-xszNDotUbk269v-9mRh_mC4iBWI3Kwbbl8rbD_hVv_K8A87EJ2Z4ev53TNRrFsMyxlQjWfYdsR0Hfnvi8dFXqEgSU5M3m2RjlKccSaTcu22dt9LVaTBgTdzxrmyJhdtCJ76fpV4NoWiS8YMsK4l1d_e_Ceu4QKnVeJ-dfCUHLvGNnOZlfLu8Qc_ebPL81x1jzxOTo_Xb7GxQeJ35FUM1Zit4_yametU9kPdOUkRdudNlT9GIfwrk6FpM1f9_fNqLzklnEn-YjS5xij7zPS-bRVeRRQidzDEqm1ORi5S2nCoGlNNn_LAjbnSCbWynvfK2lvMQTZuh1RvC7eoLrGhQIStpC8DgjUa_DhXgkksZes1YeqE9vCSsOcPRsiChgyqmkOq36h_gzkDGCLDWyBRHM-M2upAD2DUNw0wFxCbVnA7bFTRL2CZ9K5uYzRFFMdI2txIKZXJ9Dq4LRcYFcLKWnkfHHqmZUT2cSvXToh2VzUNvGR-PZvcGuVRTZRPTF0YasdtEtPmAVTT8UMhkUfd2pl2SCpo336MXystN-bf9NqEC35OJXW3WGCQ1Z9KcOOvArnm0Ukrf1WcaM0w4zD9xpaKIXGYugaW-9ngUhq0eKfJe7wTuApEdGNIn3hRTGkjmxicYdcg.qmYQAxREDxNoAyCwk0e1Dw";
        HCXIntegrator.getInstance(configMap).processIncoming(outputPayload, Operations.COVERAGE_ELIGIBILITY_ON_CHECK, output);
        assertTrue(output.containsKey(Constants.RESPONSE_OBJ));
    }

    @DisplayName("7")
    @Test
    void HcxIncomingErrorDetails() throws Exception {
        Map<String, Object> output = new HashMap<>();
        Map<String, Object> payload = new HashMap<>();
        String errorDetails = "eyJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAiLCJ4LWhjeC1zZW5kZXJfY29kZSI6IjEtM2EzYmQ2OGEtODQ4YS00ZDUyLTllYzItMDdhOTJkNzY1ZmI0IiwieC1oY3gtcmVjaXBpZW50X2NvZGUiOiIxLTdiYTA3ZTMxLWNlYmItNDc1MS1iMmI3LWZlMDUwZDlkMmMwMCIsIngtaGN4LWNvcnJlbGF0aW9uX2lkIjoiODU0ZmU0MWItMjEyZi00YTU1LWJlMmYtMTBiZGE4ZGFkYzk1IiwieC1oY3gtdGltZXN0YW1wIjoiMjAyMi0wNS0xMlQxNToyNjoxOS42MjcrMDUzMCIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYWExZTNmOWItOTBhNy00ZWQ5LTk4MjEtMDMwNmYxYmNiNzQ2IiwieC1oY3gtd29ya2Zsb3dfaWQiOiI1ZTkzNGY5MC0xMTFkLTRmMGItYjAxNi1jMjJkODIwNjc0ZTIiLCJ4LWhjeC1zdGF0dXMiOiJyZXNwb25zZS5jb21wbGV0ZSIsCiJ4LWhjeC1lcnJvcl9kZXRhaWxzIjp7CiJjb2RlIjoiRVJSX0lOVkFMSURfUEFZTE9BRCIsCiJtZXNzYWdlIjoiaW52YWxpZCByZXF1ZXN0IHBheWxvYWQiLAoidHJhY2UiOiIiLAoidGVzdCI6IiJ9fQ==.6KB707dM9YTIgHtLvtgWQ8mKwboJW3of9locizkDTHzBC2IlrT1oOQ.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.KDlTtXchhZTGufMYmOYGS4HffxPSUrfmqCHXaI9wOGY.Mz-VPPyU4RlcuYv1IwIvzw";
        payload.put(Constants.PAYLOAD, errorDetails);
        HCXIntegrator.getInstance(configMap).processIncoming(JSONUtils.serialize(payload), Operations.COVERAGE_ELIGIBILITY_CHECK, output);
        assertTrue(output.containsKey(Constants.RESPONSE_OBJ));
    }

    @DisplayName("8")
    @Test
    void HcxIncomingDebugDetails() throws Exception {
        Map<String, Object> output = new HashMap<>();
        Map<String, Object> payload = new HashMap<>();
        String debugDetails = "eyJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAiLCJ4LWhjeC1zZW5kZXJfY29kZSI6IjEtM2EzYmQ2OGEtODQ4YS00ZDUyLTllYzItMDdhOTJkNzY1ZmI0IiwieC1oY3gtcmVjaXBpZW50X2NvZGUiOiIxLTdiYTA3ZTMxLWNlYmItNDc1MS1iMmI3LWZlMDUwZDlkMmMwMCIsIngtaGN4LWNvcnJlbGF0aW9uX2lkIjoiODU0ZmU0MWItMjEyZi00YTU1LWJlMmYtMTBiZGE4ZGFkYzk1IiwieC1oY3gtdGltZXN0YW1wIjoiMjAyMi0wNS0xMlQxNToyNjoxOS42MjcrMDUzMCIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYWExZTNmOWItOTBhNy00ZWQ5LTk4MjEtMDMwNmYxYmNiNzQ2IiwieC1oY3gtd29ya2Zsb3dfaWQiOiI1ZTkzNGY5MC0xMTFkLTRmMGItYjAxNi1jMjJkODIwNjc0ZTIiLCJ4LWhjeC1zdGF0dXMiOiJyZXNwb25zZS5jb21wbGV0ZSIsCiJ4LWhjeC1kZWJ1Z19kZXRhaWxzIjp7CiJjb2RlIjoiRVJSX0lOVkFMSURfUEFZTE9BRCIsCiJtZXNzYWdlIjoiaW52YWxpZCByZXF1ZXN0IHBheWxvYWQiLAoidHJhY2UiOiIiLAoidGVzdCI6IiJ9fQ==.6KB707dM9YTIgHtLvtgWQ8mKwboJW3of9locizkDTHzBC2IlrT1oOQ.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.KDlTtXchhZTGufMYmOYGS4HffxPSUrfmqCHXaI9wOGY.Mz-VPPyU4RlcuYv1IwIvzw";
        payload.put(Constants.PAYLOAD, debugDetails);
        HCXIntegrator.getInstance(configMap).processIncoming(JSONUtils.serialize(payload), Operations.COVERAGE_ELIGIBILITY_CHECK, output);
        assertTrue(output.containsKey(Constants.RESPONSE_OBJ));
    }

    @DisplayName("9")
    @Test
    void HcxIncomingDebugFlag() throws Exception {
        Map<String, Object> output = new HashMap<>();
        Map<String, Object> payload = new HashMap<>();
        String debugFlag = "eyJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAiLCJ4LWhjeC1zZW5kZXJfY29kZSI6IjEtM2EzYmQ2OGEtODQ4YS00ZDUyLTllYzItMDdhOTJkNzY1ZmI0IiwieC1oY3gtcmVjaXBpZW50X2NvZGUiOiIxLTdiYTA3ZTMxLWNlYmItNDc1MS1iMmI3LWZlMDUwZDlkMmMwMCIsIngtaGN4LWNvcnJlbGF0aW9uX2lkIjoiODU0ZmU0MWItMjEyZi00YTU1LWJlMmYtMTBiZGE4ZGFkYzk1IiwieC1oY3gtdGltZXN0YW1wIjoiMjAyMi0wNS0xMlQxNToyNjoxOS42MjcrMDUzMCIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYWExZTNmOWItOTBhNy00ZWQ5LTk4MjEtMDMwNmYxYmNiNzQ2IiwieC1oY3gtd29ya2Zsb3dfaWQiOiI1ZTkzNGY5MC0xMTFkLTRmMGItYjAxNi1jMjJkODIwNjc0ZTIiLCJ4LWhjeC1zdGF0dXMiOiJyZXNwb25zZS5jb21wbGV0ZSIsCiJ4LWhjeC1kZWJ1Z19mbGFnIjoidGVzdCIKfQ==.6KB707dM9YTIgHtLvtgWQ8mKwboJW3of9locizkDTHzBC2IlrT1oOQ.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.KDlTtXchhZTGufMYmOYGS4HffxPSUrfmqCHXaI9wOGY.Mz-VPPyU4RlcuYv1IwIvzw";
        payload.put(Constants.PAYLOAD, debugFlag);
        HCXIntegrator.getInstance(configMap).processIncoming(JSONUtils.serialize(payload), Operations.COVERAGE_ELIGIBILITY_CHECK, output);
        assertTrue(output.containsKey(Constants.RESPONSE_OBJ));
    }

    @DisplayName("10")
    @Test
    void HcxIncomingErrorDetailsNull() throws Exception {
        Map<String, Object> output = new HashMap<>();
        Map<String, Object> payload = new HashMap<>();
        String errorDetailsEmpty = "eyJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAiLCJ4LWhjeC1zZW5kZXJfY29kZSI6IjEtM2EzYmQ2OGEtODQ4YS00ZDUyLTllYzItMDdhOTJkNzY1ZmI0IiwieC1oY3gtcmVjaXBpZW50X2NvZGUiOiIxLTdiYTA3ZTMxLWNlYmItNDc1MS1iMmI3LWZlMDUwZDlkMmMwMCIsIngtaGN4LWNvcnJlbGF0aW9uX2lkIjoiODU0ZmU0MWItMjEyZi00YTU1LWJlMmYtMTBiZGE4ZGFkYzk1IiwieC1oY3gtdGltZXN0YW1wIjoiMjAyMi0wNS0xMlQxNToyNjoxOS42MjcrMDUzMCIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYWExZTNmOWItOTBhNy00ZWQ5LTk4MjEtMDMwNmYxYmNiNzQ2IiwieC1oY3gtd29ya2Zsb3dfaWQiOiI1ZTkzNGY5MC0xMTFkLTRmMGItYjAxNi1jMjJkODIwNjc0ZTIiLCJ4LWhjeC1zdGF0dXMiOiJyZXNwb25zZS5jb21wbGV0ZSIsCiJ4LWhjeC1lcnJvcl9kZXRhaWxzIjpudWxsfQ==.6KB707dM9YTIgHtLvtgWQ8mKwboJW3of9locizkDTHzBC2IlrT1oOQ.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.KDlTtXchhZTGufMYmOYGS4HffxPSUrfmqCHXaI9wOGY.Mz-VPPyU4RlcuYv1IwIvzw";
        payload.put(Constants.PAYLOAD, errorDetailsEmpty);
        HCXIntegrator.getInstance(configMap).processIncoming(JSONUtils.serialize(payload), Operations.COVERAGE_ELIGIBILITY_CHECK, output);
        assertTrue(output.containsKey(Constants.RESPONSE_OBJ));
    }

    @DisplayName("11")
    @Test
    void HcxIncomingErrorDetailsCodeMessageEmpty() throws Exception {
        Map<String, Object> output = new HashMap<>();
        Map<String, Object> payload = new HashMap<>();
        String errorDetailsCodeMessage = "eyJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAiLCJ4LWhjeC1zZW5kZXJfY29kZSI6IjEtM2EzYmQ2OGEtODQ4YS00ZDUyLTllYzItMDdhOTJkNzY1ZmI0IiwieC1oY3gtcmVjaXBpZW50X2NvZGUiOiIxLTdiYTA3ZTMxLWNlYmItNDc1MS1iMmI3LWZlMDUwZDlkMmMwMCIsIngtaGN4LWNvcnJlbGF0aW9uX2lkIjoiODU0ZmU0MWItMjEyZi00YTU1LWJlMmYtMTBiZGE4ZGFkYzk1IiwieC1oY3gtdGltZXN0YW1wIjoiMjAyMi0wNS0xMlQxNToyNjoxOS42MjcrMDUzMCIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYWExZTNmOWItOTBhNy00ZWQ5LTk4MjEtMDMwNmYxYmNiNzQ2IiwieC1oY3gtd29ya2Zsb3dfaWQiOiI1ZTkzNGY5MC0xMTFkLTRmMGItYjAxNi1jMjJkODIwNjc0ZTIiLCJ4LWhjeC1zdGF0dXMiOiJyZXNwb25zZS5jb21wbGV0ZSIsCiJ4LWhjeC1lcnJvcl9kZXRhaWxzIjp7CiJ0cmFjZSI6IiJ9fQ==.6KB707dM9YTIgHtLvtgWQ8mKwboJW3of9locizkDTHzBC2IlrT1oOQ.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.KDlTtXchhZTGufMYmOYGS4HffxPSUrfmqCHXaI9wOGY.Mz-VPPyU4RlcuYv1IwIvzw";
        payload.put(Constants.PAYLOAD, errorDetailsCodeMessage);
        HCXIntegrator.getInstance(configMap).processIncoming(JSONUtils.serialize(payload), Operations.COVERAGE_ELIGIBILITY_CHECK, output);
        assertTrue(output.containsKey(Constants.RESPONSE_OBJ));
    }

    @DisplayName("12")
    @Test
    void HcxOutgoingRequestRecipientCodeNull() throws Exception {
        Map<String, Object> output = new HashMap<>();
        HCXIntegrator.getInstance(configMap).processOutgoingRequest(commonFhirPayload, Operations.COVERAGE_ELIGIBILITY_CHECK, null, "", "", new HashMap<>(), output);
        assertFalse(commonFhirPayload.isEmpty());
    }

    @DisplayName("13")
    @Test
    void HcxIncomingRequestInvalidPayload() throws Exception {
        Map<String, Object> output = new HashMap<>();
        Map<String, Object> payload = new HashMap<>();
        String outputPayload = "eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InRlc3Rwcm92aWRlcjEuYXBvbGxvQHN3YXN0aC1oY3gtZGV2IiwieC1oY3gtdGltZXN0YW1wIjoiMjAyMi0xMC0yN1QxMTowNzo0OCswNTMwIiwieC1oY3gtc2VuZGVyX2NvZGUiOiJ0ZXN0cHJvdmlkZXIxLmFwb2xsb0Bzd2FzdGgtaGN4LWRldiIsIngtaGN4LWNvcnJlbGF0aW9uX2lkIjoiZDRmNTZkNzktNDkwOC00YTk5LWE4ZGQtYTNiNzMzZmRlOGQ2IiwiZW5jIjoiQTI1NkdDTSIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiMWUxNzk3YmQtZGJlZC00MTkyLWIwYzktY2VmNzcyNzI0YmU1In0.NSYks0P3BizbgpGF7GctpBSFDfSfap2V7AnZ5YCQMy_V0F6IZ1weRbZrBLHDTnPwPOBGGfctXpyqiXfvldMjCI_maakNjagsyC2x0pFC6NGmYhTwjqWmpL2CCaneBf9HikqwuI2cJTK8-DNOkbT9Qj8j-NxyGv1NX8UFI1K90t9e61qJ_Xurp6Qrrt6X_fiW7Jx9Vm54kCS7ZUfGK2rw_EOvc1VydsdWnUABOcmbtcTJiSVecNdRYxiKAIsiZCHULdd92a3hzbqFbyfRu1GqmuEyoimjd7jvdDSuB4bhE6WCIF-wB9Z5d3mj1ZXS8AEGT9YuSFLQTyPfo9Di3-Px-Q.0MliuZkDRADgQXY5.LWL2_vhMA8BEYtmg8SFXVoDNWvwWLZcJ9KxOHR7VWdIRxsO7PfNk7yMhctRtmAnyaaNZYZb0e3nVTai-u9aSixhmbxq6rFe3an0HbPi43BIT4ytal-CRxWoTaoBMZLmNqSr7GAvAXxNxtkSpDRUMlGg-tGdrHmcW6b1KAbA2CxE62XlaMMt5DNarXMSBDMx1_Pz0x9QqwFY-8O1GOIwPVZF59fh2e8ytlsvTh1fgiMZSOLETzN5pgCWGacc1D-tSmDD5kDQZm3SPgwZMbkco2xmKdvfdZa1AX7rDrYO6Pl-WFxv_5SO1CWwtR45tsCCp4pIOv3VUIjwv2YlmoTgXXg-EoLNgA4N8sw4kXLNtV9hMys2JdyQ93quEcFGnPO9jMg9seAT3pq_llpkN1FqE2x7zwWFeAs0g48IFc-39td6kdgOnuVEVsGAyE_OEst8TAhvRBa7EOeZmZpM1fiANdLor2xKWOI2K3o52R2XOYnchOWwjF07eWOPYulvSZQPBc1LZ_1j1myJz4qNH6aKWxkFT99FBddQ_UA49SgHRhYNScs27Ycw0BEZso9UpiXoLDJUKIp0Q717BkM5K1DdwYixkIMSEAM2HZHRaD0fk_8C0Xx0C1WxpZAhOtjKkesd1O2iUA2YbOyClgdASSUjO9KWrSgUevdHdorUDfYjvB3Kb-pjpZEyU18wTUTMg1Pb8Zjwluf_nuYM32K7N7TZlc-mdIwy8VX956eO14hZJNLFAiaf4xQskOCPiuahxD22kn1wpGEbShwE4TJYAsXTlT1xhA86CmDZwxaXSGzuYaNcpsokFCwAPkJ6axQbkPowO_CYrY9Ma5s0fwqdnCyZeUCl5ugeK-T9DtzuXBPsXi5eVky2rvqcO6cXCGCdrNfKXnc7Ehwtrv_ZxaUg0ORk_qVuGPWtfj0o9Ww2hUe8mXh7gp3d74jkDwNHV6X4S4qLApICRDU-Fw3kHZP5S1nvunjE_0FT4f3b4-SR_HAhjwl4-Rw4pRbX4Vu--CK6NfSgmNsixyapPm28tAzDfkHTDhRcHUi67fwGTEYKQvdk0JlV6zPSPopot2sRWRakyy_31oPCtz0qfavP0YT2dJWYGR9cSaJYIxz6S2cK2C0UOIIZw-TGX5zOnOzha1F-0Q3xPOswpHczoe-TafW3F22F5juRoNk7mK-BinUc4RBfBUkQWi6xTF32mLonuoeUkDRamMPX35P8ejYzBB2eDBb16QHIKyGl8R0aV_UYU5C661dG9xKvGJ98VHzFcz5j1J9WutBaMAeTRtROqRHH00psYa0oP2M4qVWR9eEP-jK9jtL8CdFGpNOiCtB7yF9WfE9N20Pqry88TODVMiT-MebZRHhvV3WCv3A3ZMgtVRqwaPoFp33I5GEDYuqDcHED_b4qZf65ZLNp5ptBSA_faSoeUJiRKRm8fep712gWgDS_fDmhdwfgIquY1fHZkofED0k_em28t0EAdJPpv0QqIKcte2vHkl65ql720YXWmYchBpDnclEMpExJg8T2CSd90jHvypi7KaPX2ahKv9zB1qlBTOFST4SWH_2I2_Tfvyhdqud7-ZWO_KFX9blDlph7WVs9rfWXjWV6zPEVquYDL-dJw5Lbk6mtHp2W7Z0ULHPrJqjLfqwjo4gcmD1TLm6LMVVYi7B2jb-_Vum9sxrWkIvVILP-LoCI1MYRvCj1QjrmO9ZFfqAGoIud_BYDKbnU3NoBJ0eWsvucGhrzaZ4-BYj_cOdUblQu08kmCHuxdhzSh8rZ4-vFrQ-9ZP83lHDA0tX5_F2MT_LoZQhph_NedK1bhhzBPaB4och2sY83So8dmgfcIlJXOkV_K6jO517pkHR7FBO-vQcD4850F7StoFZQoGRC4nqPTX6jCjMCNOMKoN1CQ58rmXrAI5LVtfo78iErXCXpsc-IO9HPfRSK-6PwA7cETFyy_To8ZjgozhJg6XUjxnYv4wD-9SpKMJwH39eihFj_bXWhXoHeZmXB8_8YSPf5L0ADirzoo6Pkxr6-zy1AmfNFrGXI-Zfb5BC6mRfRM3g9cTLr_fN3tESHnm3wzSh5dO3gpSHhE21eADFj7A6be8p2BgvvQl_ecm6KwPyO56-0HC4jxLTgZhyhtDuULWS4J6EPN6p2kE_EB_x7N5-RibkqfsbGMHMIRjKR7uzliG-WeYemvBdtkX7AmGuNVpRd_30fHmnE_yZoGdcrJjSeycv5EdqT7CeTBziIK2R78REHroEUJ23C3lvbfrH6Tz8XJ2ktokWxPXRqbwoqd3tcN7T9PoUgSvuSLJ32a7oMGzuYYOTS6JUWmBvGihfqKng-Pf9dxyZCSZ24nhxHNbw3HqW4gKI5viL5d9jUPtaT_GQKOEHNJpDeVMdV7lGgCbogkg5l4te0onSXDOCGEdnSvS3iuqtvT4-zo9tyrWIjUl5NQ8sZiK82-Nd_szEXjJzG88Xq6-oTZEUBqryI0FZjYNkE-ME-6L-zhR8hQdxwAwNMFXHW3EVT0ScCVYCo4EAGeQnQ-HnBEw7MouFlRLiNAf-50hOUBkBau8O8yHey1nrj2bsaeUcAksNUnELXiyCxhKemwFiZvLhCVgh5TTbVYw_Y89DA-MM1zwXC-k6IMqSW7JeCZogoeWr3Zx7l4eps0OvLUoqrAFV3ll8I_XToK-Ik6VQ68VdPj4GazF6cWaXnAHLfvJG_aXcGrAYpZtgUgClHOh2OwHZmCZMSYHdQCxQimnLelRfETan7cqYrkEaWJYUgP3UC3r4sP-JqEaWyYAoFvUoQ9G9U4msM82pagm3qmlXSSbKLPSD3tDwXXPJvZWfghw1VU8ZFpmiLKXanJ5eifWcwoDPPIuAAxYfKhsppg6S98JvBXHLkAchNovaxpjZopRMOkB1kjGBL_Y09d3D7MosAZKfZ6rloz6pHtrHz2RK7OaLQnrKZGVvYm3kuPRexi6p5gQ0wdPNMUNUU02FXBE1s_EASMX595qZE-zQ70Sor5l7YQ1CtM0EUaks1sVwRLyt8dyRi-ezsr6zNZFE4DTP7LUF96Mhb7wesntpOEOLTHeLbAJcC4rXUIN1guzU4vxEa8zqUzjEKy9zqQAUZ2e1mLpGDSoiYbdYHAmX1KRpfaTiUg6uXolUA60Vo-LAzlZ0ddU_NXOJJNSkx-F-U_0vcblf6qxTSUp35ppfxtP0_859WOIgWULId4jSEvi0hHUh2YGgbwh_uIGygjzISEHEdDHJ5mKDFrsGB_Wsw8VSM9-dPvf4C_ShvwxUkvuZh5_A9sjjUoVbz5nLcgTTsMMgM7xbwq-4E7dWKKMFy0gcy856lu5BlAIQ0VGtt6Cx3LtJ9aqOGchSiplhka67509gHuw33iPew2vdleAtJ3TAcSXkBg4Mw2dFqfWRH06gsm5pYjN8JR6RZHrxv8ldssKvV8E6udVUCRE-SkCMxbvCbSbZxNwD5AkbzbKlqf9pCtYNe9ThlgmV9HR7UE6pWPefCloH2DGs-iRSmWLUX1nyqQgs5KOX4YkWAi6He3IMMoFTL1SPNg1Z77RJZAYKvU2Hu2OK5mzUvyFcTLA3u8U6G6DUFjM3NFdhlEaxEbi6pAt7ChK2rRtGGUgJEEhIXU3_yqj5SGGJNplh576m4_Kg0o8XGjmz8LmbOhZflgMrVZsQUJ4UulqWpBOt5PBeBYhRNTi7EeBWQ7bCWQHYHdxJlsGb113wliz9vmtEov61LHubQV1-AAm-gp_FDOCZc9P4nv-auWzbxxjpdHMfngYPkEx6mrga6kst_7RsTkcedKFYjppmIKRtAi3MT2cBcsBGGblqdJ4tT6BOyDRIo3g8mw8RrbQeSKE3w27-tX3F9vJ9c68OMJ4vRsDHXg9XzIozhN7S0Jure-IUoOcG9XpgdW9xHuH_kcb-gg8v4MMRZn0EzPZRWIdVTpxIy7DWvHGgqYIG0JzKCXU3zaCnLow4XtahxVXWH6FNTi9z5dhiMPYIasbCVHMGmg6mjk5WwH0L2zqGsRBr_26ghrd6Pd_yxKk68IrTK7NCsHIvQHGJoqnepklu86AZbb0bST344sXJu5ulkZXMedg9JwrDSNAdmt0I57JmqEG6-29YUnC1V1IysfdttHIc59SNNHRrM4PtLh1_1qwJRNoFvJ8SxQv_GEd3GKf0tUv6kanuOGmof9thHRAozrTDhlms3_qrVe-6OWWAEiapvIRbZCp-unGW8xLHD3bH2pz47dZSTIme3LVAyNALhVV-u195ZUXz3yDKXsR1_uHBbvhk8-4PVKC1QBuZ_VF6frsYSIqoNkbOkOrNGieIWH56MnBjgaUtTYpAFo4U8zaX6TXm-xszNDotUbk269v-9mRh_mC4iBWI3Kwbbl8rbD_hVv_K8A87EJ2Z4ev53TNRrFsMyxlQjWfYdsR0Hfnvi8dFXqEgSU5M3m2RjlKccSaTcu22dt9LVaTBgTdzxrmyJhdtCJ76fpV4NoWiS8YMsK4l1d_e_Ceu4QKnVeJ-dfCUHLvGNnOZlfLu8Qc_ebPL81x1jzxOTo_Xb7GxQeJ35FUM1Zit4_yametU9kPdOUkRdudNlT9GIfwrk6FpM1f9_fNqLzklnEn-YjS5xij7zPS-bRVeRRQidzDEqm1ORi5S2nCoGlNNn_LAjbnSCbWynvfK2lvMQTZuh1RvC7eoLrGhQIStpC8DgjUa_DhXgkksZes1YeqE9vCSsOcPRsiChgyqmkOq36h_gzkDGCLDWyBRHM-M2upAD2DUNw0wFxCbVnA7bFTRL2CZ9K5uYzRFFMdI2txIKZXJ9Dq4LRcYFcLKWnkfHHqmZUT2cSvXToh2VzUNvGR-PZvcGuVRTZRPTF0YasdtEtPmAVTT8UMhkUfd2pl2SCpo336MXystN-bf9NqEC35OJXW3WGCQ1Z9KcOOvArnm0Ukrf1WcaM0w4zD9xpaKIXGYugaW-9ngUhq0eKfJe7wTuApEdGNIn3hRTGkjmxicYdcg";
        payload.put(Constants.PAYLOAD, outputPayload);
        HCXIntegrator.getInstance(configMap).processIncoming(JSONUtils.serialize(payload), Operations.COVERAGE_ELIGIBILITY_CHECK, output);
        assertTrue(output.containsKey(Constants.RESPONSE_OBJ));
    }

    @DisplayName("14")
    @Test
    void HcxSendNotificationWithTemplateParams() throws Exception {
        Map<String, Object> output = new HashMap<>();
        String topicCode = "notif-participant-new-protocol-version-support";
        Map<String, String> templateParams = new HashMap<>();
        templateParams.put("version_code", "v0.8");
        templateParams.put("participant_name", "test-provider");
        HCXIntegrator.getInstance(configMap).sendNotification(topicCode, "participant_role", List.of("payor"), "", templateParams, output);
        assertEquals("payr_demomo_790424@swasth-hcx-dev", configMap.get(Constants.PARTICIPANT_CODE));
    }

    @DisplayName("14")
    @Test
    void HcxSendNotificationWithMessage() throws Exception {
        Map<String, Object> output = new HashMap<>();
        String topicCode = "notif-participant-new-protocol-version-support";
        String message = "Participant has upgraded to latest protocol version";
        HCXIntegrator.getInstance(configMap).sendNotification(topicCode, "participant_role", List.of("payor"), message, new HashMap<>(), output);
        assertEquals("payr_demomo_790424@swasth-hcx-dev", configMap.get(Constants.PARTICIPANT_CODE));
    }

    @DisplayName("15")
    @Test
    void HcxReceiveNotification() throws Exception {
        String payload = "eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI2NzA2ZGM1Zi1iNDA4LTQ2NTYtYWM4OS1kODliYzQ0ZDg3NGIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImlzcyI6Imh0dHA6XC9cL2tleWNsb2FrLmtleWNsb2FrLnN2Yy5jbHVzdGVyLmxvY2FsOjgwODBcL2F1dGhcL3JlYWxtc1wvc3dhc3RoLWhjeC1wYXJ0aWNpcGFudHMiLCJ0eXAiOiJCZWFyZXIiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJwYXlyX2RlbW9tb183OTA0MjRAc3dhc3RoLWhjeC1kZXYiLCJhdWQiOiJhY2NvdW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJwYXlvciIsImRlZmF1bHQtcm9sZXMtbmRlYXIiXX0sImF6cCI6InJlZ2lzdHJ5LWZyb250ZW5kIiwicGFydGljaXBhbnRfY29kZSI6InBheXJfZGVtb21vXzc5MDQyNEBzd2FzdGgtaGN4LWRldiIsInNjb3BlIjoicHJvZmlsZSBlbWFpbCIsImV4cCI6MTcxMjEyODU2NCwic2Vzc2lvbl9zdGF0ZSI6IjZlNjhmNGQxLTNmNzYtNDVhNi04YWUxLTA3MjgyNjkwZWZmNiIsImlhdCI6MTcxMDQwMDU2NCwianRpIjoiYjM1NTM4NTItNWEyZC00YTViLWFhNjItNmJjYjY5NDI4ZjAxIiwiZW50aXR5IjpbIk9yZ2FuaXNhdGlvbiJdLCJlbWFpbCI6Im1vY2twYXlvcittb2NrX3BheW9yQHlvcG1haWwuY29tIn0.A6ER0HOkGyUs6aLAYwQO1kRCUUiBObzOBi1u5Flr4jtGK98c6tmnsCT1RZxJLdc_F94nmVPY9f-EF1zeDLsUnf_3LvvXRTAUCWvKFtlsXUy8urEOaW28PcNgvO747DoJVRteAdbRRlZ0FhLBqOaZeNyEOnLNHc9zzvzvy31PKEdOv0cVPgd49yn3VFBYKS1eul4R_CdklDhvuwmJllzZx5LXb7gOrV4IoxfljWTSAAlB6Nv4MSBZpUZbbOk_ihtnMYQyb6uivJxTlKK16GY01nOt8Fp6UG3bugJTc8SiKW0ipl1bk1j1JbvOkTYg1VC7Fy2Nj9yE75xwC4bsdDLlYg";
        Map<String, Object> decodedPayload = JSONUtils.decodeBase64String(payload.split("\\.")[1], Map.class);
        Map<String, Object> output = new HashMap<>();
        HCXIntegrator.getInstance(configMap).receiveNotification(payload, output);
        System.out.println(output);
        String topicCode = (String) ((Map<String, Object>) output.get(Constants.PAYLOAD)).get(Constants.TOPIC_CODE);
        String message = (String) ((Map<String, Object>) output.get(Constants.PAYLOAD)).get(Constants.MESSAGE);
        assertEquals(decodedPayload.get(Constants.TOPIC_CODE), topicCode);
        assertEquals(decodedPayload.get(Constants.MESSAGE), message);
    }

    @DisplayName("16")
    @Test
    void HcxSendNotificationTopicCodeEmpty() throws Exception {
        Map<String, Object> output = new HashMap<>();
        String topicCode = "";
        String message = "Participant has upgraded to latest protocol version";
        HCXIntegrator.getInstance(configMap).sendNotification(topicCode, "participant_role", List.of("payor"), message, new HashMap<>(), output);
        assertEquals("Error while sending the notifications: Topic code cannot be empty", output.get("error"));
    }

    @DisplayName("17")
    @Test
    void HcxSendNotificationWithMessageEmpty() throws Exception {
        Map<String, Object> output = new HashMap<>();
        String topicCode = "notif-participant-new-protocol-version-support";
        String message = "";
        HCXIntegrator.getInstance(configMap).sendNotification(topicCode, "participant_role", List.of("payor"), message, new HashMap<>(), output);
        assertEquals("Error while sending the notifications: Either the message or the template parameters are mandatory.", output.get("error"));
    }

    @DisplayName("18")
    @Test
    void HcxSendNotificationWithRecipientEmpty() throws Exception {
        initializingConfigMap();
        Map<String, Object> output = new HashMap<>();
        String topicCode = "notif-participant-new-protocol-version-support";
        String message = "Participant has upgraded to latest protocol version";
        HCXIntegrator.getInstance(configMap).sendNotification(topicCode, "participant_role", new ArrayList<>(), message, new HashMap<>(), output);
        assertEquals("Error while sending the notifications: Recipients cannot be empty", output.get("error"));
    }

    @DisplayName("19")
    @Test
    void HcxSendNotificationWithRecipientTypeEmpty() throws Exception {
        Map<String, Object> output = new HashMap<>();
        String topicCode = "notif-participant-new-protocol-version-support";
        String message = "Participant has upgraded to latest protocol version";
        HCXIntegrator.getInstance(configMap).sendNotification(topicCode, "", List.of("payor"), message, new HashMap<>(), output);
        assertEquals("Error while sending the notifications: Recipient type cannot be empty", output.get("error"));
    }

    @DisplayName("20")
    @Test
    void HcxOutgoingRequestCheckWithWorkflowIdSuccess() throws Exception {
        Map<String, Object> output = new HashMap<>();
        HCXIntegrator.getInstance(configMap).processOutgoingRequest(commonFhirPayload, Operations.COVERAGE_ELIGIBILITY_CHECK, "payr_demomo_790424@swasth-hcx-dev", "", "", UUID.randomUUID().toString(), new HashMap<>(), output);
        BaseRequest baseRequest = new BaseRequest(output);
        assertEquals(configMap.getOrDefault("participantCode", "").toString(), baseRequest.getHcxSenderCode());
    }


    public Map<String,Object> configMapWithoutSecretAndPassword() throws Exception {
        Map<String,Object> configMap = new HashMap<>();
        configMap.put("protocolBasePath", "https://dev-hcx.swasth.app/api/v0.8");
        configMap.put("participantCode", "testprovider1.apollo@swasth-hcx-dev");
        configMap.put("username", "testprovider1@apollo.com");
        configMap.put("encryptionPrivateKey", "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCG+XLPYiCxrZq71IX+w7uoDGxGI7qy7XaDbL3BJE33ju7rjdrP7wsAOWRvM8BIyWuRZZhl9xG+u7l/7OsZAzGoqI7p+32x+r9IJVzboLDajk6tp/NPg1csc7f2M5Bu6rkLEvrKLz3dgy3Q928rMsD3rSmzBLelfKTo+aDXvCOiw1dMWsZZdkEpCTJxH39Nb2K4S59kO/R2GtSU/QMLq65m34XcMZpDtatA1u1S8JdZNNeMCO+NuFKBzIfvXUCQ8jkf7h612+UP1AYhoyCMFpzUZ9b7liQF9TYpX1Myr/tT75WKuRlkFlcALUrtVskL8KA0w6sA0nX5fORVsuVehVeDAgMBAAECggEAX1n1y5/M7PhxqWO3zYTFGzC7hMlU6XZsFOhLHRjio5KsImgyPlbm9J+W3iA3JLR2c17MTKxAMvg3UbIzW5YwDLAXViC+aW90like8mEQzzVdS7ysXG2ytcqCGUHQNStI0hP0a8T39XbodQl31ZKjU9VW8grRGe12Kse+4ukcW6yRVES+CkyO5BQB+vs3voZavodRGsk/YSt00PtIrFPJgkDuyzzcybKJD9zeJk5W3OGVK1z0on+NXKekRti5FBx/uEkT3+knkz7ZlTDNcyexyeiv7zSL/L6tcszV0Fe0g9vJktqnenEyh4BgbqABPzQR++DaCgW5zsFiQuD0hMadoQKBgQC+rekgpBHsPnbjQ2Ptog9cFzGY6LRGXxVcY7hKBtAZOKAKus5RmMi7Uv7aYJgtX2jt6QJMuE90JLEgdO2vxYG5V7H6Tx+HqH7ftCGZq70A9jFBaba04QAp0r4TnD6v/LM+PGVT8FKtggp+o7gZqXYlSVFm6YzI37G08w43t2j2aQKBgQC1Nluxop8w6pmHxabaFXYomNckziBNMML5GjXW6b0xrzlnZo0p0lTuDtUy2xjaRWRYxb/1lu//LIrWqSGtzu+1mdmV2RbOd26PArKw0pYpXhKFu/W7r6n64/iCisoMJGWSRJVK9X3D4AjPaWOtE+jUTBLOk0lqPJP8K6yiCA6ZCwKBgDLtgDaXm7HdfSN1/Fqbzj5qc3TDsmKZQrtKZw5eg3Y5CYXUHwbsJ7DgmfD5m6uCsCPa+CJFl/MNWcGxeUpZFizKn16bg3BYMIrPMao5lGGNX9p4wbPN5J1HDD1wnc2jULxupSGmLm7pLKRmVeWEvWl4C6XQ+ykrlesef82hzwcBAoGBAKGY3v4y4jlSDCXaqadzWhJr8ffdZUrQwB46NGb5vADxnIRMHHh+G8TLL26RmcET/p93gW518oGg7BLvcpw3nOZaU4HgvQjT0qDvrAApW0V6oZPnAQUlarTU1Uk8kV9wma9tP6E/+K5TPCgSeJPg3FFtoZvcFq0JZoKLRACepL3vAoGAMAUHmNHvDI+v0eyQjQxlmeAscuW0KVAQQR3OdwEwTwdFhp9Il7/mslN1DLBddhj6WtVKLXu85RIGY8I2NhMXLFMgl+q+mvKMFmcTLSJb5bJHyMz/foenGA/3Yl50h9dJRFItApGuEJo/30cG+VmYo2rjtEifktX4mDfbgLsNwsI=\n-----END PRIVATE KEY-----");
        configMap.put("signingPrivateKey", "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCG+XLPYiCxrZq71IX+w7uoDGxGI7qy7XaDbL3BJE33ju7rjdrP7wsAOWRvM8BIyWuRZZhl9xG+u7l/7OsZAzGoqI7p+32x+r9IJVzboLDajk6tp/NPg1csc7f2M5Bu6rkLEvrKLz3dgy3Q928rMsD3rSmzBLelfKTo+aDXvCOiw1dMWsZZdkEpCTJxH39Nb2K4S59kO/R2GtSU/QMLq65m34XcMZpDtatA1u1S8JdZNNeMCO+NuFKBzIfvXUCQ8jkf7h612+UP1AYhoyCMFpzUZ9b7liQF9TYpX1Myr/tT75WKuRlkFlcALUrtVskL8KA0w6sA0nX5fORVsuVehVeDAgMBAAECggEAX1n1y5/M7PhxqWO3zYTFGzC7hMlU6XZsFOhLHRjio5KsImgyPlbm9J+W3iA3JLR2c17MTKxAMvg3UbIzW5YwDLAXViC+aW90like8mEQzzVdS7ysXG2ytcqCGUHQNStI0hP0a8T39XbodQl31ZKjU9VW8grRGe12Kse+4ukcW6yRVES+CkyO5BQB+vs3voZavodRGsk/YSt00PtIrFPJgkDuyzzcybKJD9zeJk5W3OGVK1z0on+NXKekRti5FBx/uEkT3+knkz7ZlTDNcyexyeiv7zSL/L6tcszV0Fe0g9vJktqnenEyh4BgbqABPzQR++DaCgW5zsFiQuD0hMadoQKBgQC+rekgpBHsPnbjQ2Ptog9cFzGY6LRGXxVcY7hKBtAZOKAKus5RmMi7Uv7aYJgtX2jt6QJMuE90JLEgdO2vxYG5V7H6Tx+HqH7ftCGZq70A9jFBaba04QAp0r4TnD6v/LM+PGVT8FKtggp+o7gZqXYlSVFm6YzI37G08w43t2j2aQKBgQC1Nluxop8w6pmHxabaFXYomNckziBNMML5GjXW6b0xrzlnZo0p0lTuDtUy2xjaRWRYxb/1lu//LIrWqSGtzu+1mdmV2RbOd26PArKw0pYpXhKFu/W7r6n64/iCisoMJGWSRJVK9X3D4AjPaWOtE+jUTBLOk0lqPJP8K6yiCA6ZCwKBgDLtgDaXm7HdfSN1/Fqbzj5qc3TDsmKZQrtKZw5eg3Y5CYXUHwbsJ7DgmfD5m6uCsCPa+CJFl/MNWcGxeUpZFizKn16bg3BYMIrPMao5lGGNX9p4wbPN5J1HDD1wnc2jULxupSGmLm7pLKRmVeWEvWl4C6XQ+ykrlesef82hzwcBAoGBAKGY3v4y4jlSDCXaqadzWhJr8ffdZUrQwB46NGb5vADxnIRMHHh+G8TLL26RmcET/p93gW518oGg7BLvcpw3nOZaU4HgvQjT0qDvrAApW0V6oZPnAQUlarTU1Uk8kV9wma9tP6E/+K5TPCgSeJPg3FFtoZvcFq0JZoKLRACepL3vAoGAMAUHmNHvDI+v0eyQjQxlmeAscuW0KVAQQR3OdwEwTwdFhp9Il7/mslN1DLBddhj6WtVKLXu85RIGY8I2NhMXLFMgl+q+mvKMFmcTLSJb5bJHyMz/foenGA/3Yl50h9dJRFItApGuEJo/30cG+VmYo2rjtEifktX4mDfbgLsNwsI=\n-----END PRIVATE KEY-----");
        return configMap;
    }


    @Test
    void hcxRequestWithoutSecretAndPasswordInConfig() {
        ClientException exception = assertThrows(ClientException.class, () -> {
            HCXIntegrator.getInstance(configMapWithoutSecretAndPassword());
        });
        assertEquals("Access token generation failed. Please provide participant password or user secret in the config", exception.getMessage());
    }

    public Map<String,Object> configMapWithSecret() throws Exception {
        Map<String,Object> configMap = new HashMap<>();
        configMap.put("protocolBasePath", "https://dev-hcx.swasth.app/api/v0.8");
        configMap.put("participantCode", "testprovider1.apollo@swasth-hcx-dev");
        configMap.put("username", "testprovider1@apollo.com");
        configMap.put("secret", "Test@12345");
        configMap.put("encryptionPrivateKey", "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCG+XLPYiCxrZq71IX+w7uoDGxGI7qy7XaDbL3BJE33ju7rjdrP7wsAOWRvM8BIyWuRZZhl9xG+u7l/7OsZAzGoqI7p+32x+r9IJVzboLDajk6tp/NPg1csc7f2M5Bu6rkLEvrKLz3dgy3Q928rMsD3rSmzBLelfKTo+aDXvCOiw1dMWsZZdkEpCTJxH39Nb2K4S59kO/R2GtSU/QMLq65m34XcMZpDtatA1u1S8JdZNNeMCO+NuFKBzIfvXUCQ8jkf7h612+UP1AYhoyCMFpzUZ9b7liQF9TYpX1Myr/tT75WKuRlkFlcALUrtVskL8KA0w6sA0nX5fORVsuVehVeDAgMBAAECggEAX1n1y5/M7PhxqWO3zYTFGzC7hMlU6XZsFOhLHRjio5KsImgyPlbm9J+W3iA3JLR2c17MTKxAMvg3UbIzW5YwDLAXViC+aW90like8mEQzzVdS7ysXG2ytcqCGUHQNStI0hP0a8T39XbodQl31ZKjU9VW8grRGe12Kse+4ukcW6yRVES+CkyO5BQB+vs3voZavodRGsk/YSt00PtIrFPJgkDuyzzcybKJD9zeJk5W3OGVK1z0on+NXKekRti5FBx/uEkT3+knkz7ZlTDNcyexyeiv7zSL/L6tcszV0Fe0g9vJktqnenEyh4BgbqABPzQR++DaCgW5zsFiQuD0hMadoQKBgQC+rekgpBHsPnbjQ2Ptog9cFzGY6LRGXxVcY7hKBtAZOKAKus5RmMi7Uv7aYJgtX2jt6QJMuE90JLEgdO2vxYG5V7H6Tx+HqH7ftCGZq70A9jFBaba04QAp0r4TnD6v/LM+PGVT8FKtggp+o7gZqXYlSVFm6YzI37G08w43t2j2aQKBgQC1Nluxop8w6pmHxabaFXYomNckziBNMML5GjXW6b0xrzlnZo0p0lTuDtUy2xjaRWRYxb/1lu//LIrWqSGtzu+1mdmV2RbOd26PArKw0pYpXhKFu/W7r6n64/iCisoMJGWSRJVK9X3D4AjPaWOtE+jUTBLOk0lqPJP8K6yiCA6ZCwKBgDLtgDaXm7HdfSN1/Fqbzj5qc3TDsmKZQrtKZw5eg3Y5CYXUHwbsJ7DgmfD5m6uCsCPa+CJFl/MNWcGxeUpZFizKn16bg3BYMIrPMao5lGGNX9p4wbPN5J1HDD1wnc2jULxupSGmLm7pLKRmVeWEvWl4C6XQ+ykrlesef82hzwcBAoGBAKGY3v4y4jlSDCXaqadzWhJr8ffdZUrQwB46NGb5vADxnIRMHHh+G8TLL26RmcET/p93gW518oGg7BLvcpw3nOZaU4HgvQjT0qDvrAApW0V6oZPnAQUlarTU1Uk8kV9wma9tP6E/+K5TPCgSeJPg3FFtoZvcFq0JZoKLRACepL3vAoGAMAUHmNHvDI+v0eyQjQxlmeAscuW0KVAQQR3OdwEwTwdFhp9Il7/mslN1DLBddhj6WtVKLXu85RIGY8I2NhMXLFMgl+q+mvKMFmcTLSJb5bJHyMz/foenGA/3Yl50h9dJRFItApGuEJo/30cG+VmYo2rjtEifktX4mDfbgLsNwsI=\n-----END PRIVATE KEY-----");
        configMap.put("signingPrivateKey", "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCG+XLPYiCxrZq71IX+w7uoDGxGI7qy7XaDbL3BJE33ju7rjdrP7wsAOWRvM8BIyWuRZZhl9xG+u7l/7OsZAzGoqI7p+32x+r9IJVzboLDajk6tp/NPg1csc7f2M5Bu6rkLEvrKLz3dgy3Q928rMsD3rSmzBLelfKTo+aDXvCOiw1dMWsZZdkEpCTJxH39Nb2K4S59kO/R2GtSU/QMLq65m34XcMZpDtatA1u1S8JdZNNeMCO+NuFKBzIfvXUCQ8jkf7h612+UP1AYhoyCMFpzUZ9b7liQF9TYpX1Myr/tT75WKuRlkFlcALUrtVskL8KA0w6sA0nX5fORVsuVehVeDAgMBAAECggEAX1n1y5/M7PhxqWO3zYTFGzC7hMlU6XZsFOhLHRjio5KsImgyPlbm9J+W3iA3JLR2c17MTKxAMvg3UbIzW5YwDLAXViC+aW90like8mEQzzVdS7ysXG2ytcqCGUHQNStI0hP0a8T39XbodQl31ZKjU9VW8grRGe12Kse+4ukcW6yRVES+CkyO5BQB+vs3voZavodRGsk/YSt00PtIrFPJgkDuyzzcybKJD9zeJk5W3OGVK1z0on+NXKekRti5FBx/uEkT3+knkz7ZlTDNcyexyeiv7zSL/L6tcszV0Fe0g9vJktqnenEyh4BgbqABPzQR++DaCgW5zsFiQuD0hMadoQKBgQC+rekgpBHsPnbjQ2Ptog9cFzGY6LRGXxVcY7hKBtAZOKAKus5RmMi7Uv7aYJgtX2jt6QJMuE90JLEgdO2vxYG5V7H6Tx+HqH7ftCGZq70A9jFBaba04QAp0r4TnD6v/LM+PGVT8FKtggp+o7gZqXYlSVFm6YzI37G08w43t2j2aQKBgQC1Nluxop8w6pmHxabaFXYomNckziBNMML5GjXW6b0xrzlnZo0p0lTuDtUy2xjaRWRYxb/1lu//LIrWqSGtzu+1mdmV2RbOd26PArKw0pYpXhKFu/W7r6n64/iCisoMJGWSRJVK9X3D4AjPaWOtE+jUTBLOk0lqPJP8K6yiCA6ZCwKBgDLtgDaXm7HdfSN1/Fqbzj5qc3TDsmKZQrtKZw5eg3Y5CYXUHwbsJ7DgmfD5m6uCsCPa+CJFl/MNWcGxeUpZFizKn16bg3BYMIrPMao5lGGNX9p4wbPN5J1HDD1wnc2jULxupSGmLm7pLKRmVeWEvWl4C6XQ+ykrlesef82hzwcBAoGBAKGY3v4y4jlSDCXaqadzWhJr8ffdZUrQwB46NGb5vADxnIRMHHh+G8TLL26RmcET/p93gW518oGg7BLvcpw3nOZaU4HgvQjT0qDvrAApW0V6oZPnAQUlarTU1Uk8kV9wma9tP6E/+K5TPCgSeJPg3FFtoZvcFq0JZoKLRACepL3vAoGAMAUHmNHvDI+v0eyQjQxlmeAscuW0KVAQQR3OdwEwTwdFhp9Il7/mslN1DLBddhj6WtVKLXu85RIGY8I2NhMXLFMgl+q+mvKMFmcTLSJb5bJHyMz/foenGA/3Yl50h9dJRFItApGuEJo/30cG+VmYo2rjtEifktX4mDfbgLsNwsI=\n-----END PRIVATE KEY-----");
        return configMap;
    }


    @Test
    public void hcxRequestEligibilityCheckSuccessWithSecret() throws Exception {
        Map<String, Object> output = new HashMap<>();
        HCXIntegrator.getInstance(configMapWithSecret()).processOutgoingRequest(commonFhirPayload, Operations.COVERAGE_ELIGIBILITY_CHECK, "payr_demomo_790424@swasth-hcx-dev", "", "", new HashMap<>(), output);
        BaseRequest baseRequest = new BaseRequest(output);
        assertEquals(configMap.getOrDefault("participantCode", "").toString(), baseRequest.getHcxSenderCode());
    }
}

